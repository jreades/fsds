<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Practical 10: Presenting Data â€“ Foundations of Spatial Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//img/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-94502d3d680d4f599d90f0c2e6fbae98.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-805392868925c57f579070e836f82e18.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<meta property="og:title" content="Practical 10: Presenting Data â€“ Foundations of Spatial Data Science">
<meta property="og:description" content="Visualisation and Tables">
<meta property="og:image" content="Practical-10-Presenting_Data_files/figure-html/cell-14-output-1.png">
<meta property="og:site_name" content="Foundations">
<meta property="og:locale" content="en_GB">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-md " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/CASA_Logo_no_text.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Foundations of Spatial Data Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Welcome</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../setup/index.html"> 
<span class="menu-text">Setup</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-week-by-week" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Week-by-Week</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-week-by-week">    
        <li>
    <a class="dropdown-item" href="../sessions/index.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Part 1: Foundations</li>
        <li>
    <a class="dropdown-item" href="../sessions/week1.html">
 <span class="dropdown-text">1. Setting Up</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week2.html">
 <span class="dropdown-text">2. Foundations (Pt.1)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week3.html">
 <span class="dropdown-text">3. Foundations (Pt.2)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week4.html">
 <span class="dropdown-text">4. Efficient Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week5.html">
 <span class="dropdown-text">5. Objects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/reading_week.html">
 <span class="dropdown-text">Reading Week</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Part 2: Process</li>
        <li>
    <a class="dropdown-item" href="../sessions/week6.html">
 <span class="dropdown-text">6. Numeric Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week7.html">
 <span class="dropdown-text">7. Spatial Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week8.html">
 <span class="dropdown-text">8. Textual Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week9.html">
 <span class="dropdown-text">9. Selecting Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week10.html">
 <span class="dropdown-text">10. Presenting Data</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Part 3: Bonus</li>
        <li>
    <a class="dropdown-item" href="../sessions/week11.html">
 <span class="dropdown-text">11. Dimensions in Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week12.html">
 <span class="dropdown-text">12. Grouping Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../references.html">
 <span class="dropdown-text">Bibliography</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-assessments" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Assessments</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-assessments">    
        <li>
    <a class="dropdown-item" href="../assessments/index.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Elements</li>
        <li>
    <a class="dropdown-item" href="../assessments/exam.html">
 <span class="dropdown-text">Timed Open Book Exam</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessments/group.html">
 <span class="dropdown-text">Group Work</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessments/peer.html">
 <span class="dropdown-text">Group Self-Evaluation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../help.html"> 
<span class="menu-text">Getting Help</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#preamble" id="toc-preamble" class="nav-link active" data-scroll-target="#preamble">Preamble</a></li>
  <li><a href="#using-maplotlib" id="toc-using-maplotlib" class="nav-link" data-scroll-target="#using-maplotlib">Using Maplotlib</a></li>
  <li><a href="#create-an-atlas" id="toc-create-an-atlas" class="nav-link" data-scroll-target="#create-an-atlas">Create an Atlas</a></li>
  <li><a href="#think-text" id="toc-think-text" class="nav-link" data-scroll-target="#think-text">Think Text!</a></li>
  <li><a href="#using-bokeh" id="toc-using-bokeh" class="nav-link" data-scroll-target="#using-bokeh">Using Bokeh</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jreades/fsds/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Practical-10-Presenting_Data.ipynb" download="Practical-10-Presenting_Data.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li><li><a href="Practical-10-Presenting_Data.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Practical 10: Presenting Data</h1>
<p class="subtitle lead">Visualisation and Tables</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This practical focusses on the final topic we want to cover in <em>Foundations</em>: visualisation! You will have seen quite a bit of this across the preceding three to four weeks, but it was done in an <em>ad-hoc</em> way, here we try to systematise things a bit.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ðŸ”— Connections
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here weâ€™re trying to tidy up the loose ends. Youâ€™ve already worked with basic data visualisations in Seaborn and Matplotlib (including (geo)pandaâ€™s <code>plot</code> function), but we want you to have a better sense of how that <em>works</em> as part of a coherent â€“ if altogether rather complex and overwhelming â€“ approach to managing a data visualisation.</p>
</div>
</div>
<section id="preamble" class="level1">
<h1>Preamble</h1>
<div id="06e3a524" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.cm <span class="im">as</span> cm</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4697df62" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> requests <span class="im">import</span> get</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.parse <span class="im">import</span> urlparse</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> wraps</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> check_cache(f):</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">@wraps</span>(f)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(src, dst, min_size<span class="op">=</span><span class="dv">100</span>):</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> urlparse(src) <span class="co"># We assume that this is some kind of valid URL </span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        fn  <span class="op">=</span> os.path.split(url.path)[<span class="op">-</span><span class="dv">1</span>] <span class="co"># Extract the filename</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        dsn <span class="op">=</span> os.path.join(dst,fn) <span class="co">#&nbsp;Destination filename</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> os.path.isfile(dsn) <span class="kw">and</span> os.path.getsize(dsn) <span class="op">&gt;</span> min_size:</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"+ </span><span class="sc">{</span>dsn<span class="sc">}</span><span class="ss"> found locally!"</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span>(dsn)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"+ </span><span class="sc">{</span>dsn<span class="sc">}</span><span class="ss"> not found, downloading!"</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span>(f(src, dsn))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="at">@check_cache</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cache_data(src:<span class="bu">str</span>, dst:<span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Downloads a remote file.</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">    The function sits between the 'read' step of a pandas or geopandas</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">    data frame and downloading the file from a remote location. The idea</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">    is that it will save it locally so that you don't need to remember to</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co">    do so yourself. Subsequent re-reads of the file will return instantly</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co">    rather than downloading the entire file for a second or n-th itme.</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="co">    src : str</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co">        The remote *source* for the file, any valid URL should work.</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co">    dst : str</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co">        The *destination* location to save the downloaded file.</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="co">    str</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="co">        A string representing the local location of the file.</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the path back into a list (without)</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the filename -- we need to check that directories</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># exist first.</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    path <span class="op">=</span> os.path.split(dst)[<span class="dv">0</span>]</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Path: </span><span class="sc">{</span>path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create any missing directories in dest(ination) path</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -- os.path.join is the reverse of split (as you saw above)</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># but it doesn't work with lists... so I had to google how</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># to use the 'splat' operator! os.makedirs creates missing</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># directories in a path automatically.</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> path <span class="op">!=</span> <span class="st">''</span>:</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        os.makedirs(path, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Download and write the file</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(dst, <span class="st">"wb"</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> get(src)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span>.write(response.content)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">' + Done downloading...'</span>)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dst</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-maplotlib" class="level1">
<h1>Using Maplotlib</h1>
<section id="anatomy-of-a-figure" class="level2">
<h2 class="anchored" data-anchor-id="anatomy-of-a-figure">Anatomy of a Figure</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You might want to bookmark the â€˜Anatomy of a Figureâ€™ image so that you can easily find and refer to it in the future. This structure is why <code>matplotlib</code> is so much nastier than <code>ggplot</code>, but it does also give you greater <em>control</em> over the output if you really dig into the guts of things.</p>
</div>
</div>
<p><em>One</em> of the reasons that Matplotlib is so much more complex than <code>ggplot</code> is that it can actually <em>do</em> a lot more than ggplot, including image manipulation, axis translation, and even 3D. You can get a sense of this by looking at <a href="https://matplotlib.org/stable/tutorials/index.html">the tutorials</a> since the <a href="https://matplotlib.org/stable/users/index.html">Users guide</a> can be a bit overwhelming.</p>
<p>Nevertheless, the <a href="https://matplotlib.org/stable/gallery/showcase/anatomy.html">core components of all matplotlib figures</a> can be seen here:</p>
<p><img src="https://matplotlib.org/stable/_images/sphx_glr_anatomy_001.png" alt="Anatomy of a Figure" style="width:75%"></p>
</section>
<section id="finding-fonts" class="level2">
<h2 class="anchored" data-anchor-id="finding-fonts">Finding Fonts</h2>
<p>I find matplotlibâ€™s use of fonts to be <em>profoundly</em> weird. If you use <code>conda</code> and install directly on to the computer then you <em>might</em> have access to all of your computerâ€™s fonts (though there are different <em>types</em> of fonts as well, not all of which will show up), but for most users it will be those that were installed into Docker.</p>
<section id="listing-fonts" class="level3">
<h3 class="anchored" data-anchor-id="listing-fonts">Listing Fonts</h3>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Depending on how you are running the notebook, you may not be able to see all of the fonts available on your system. If the notebook is running in a Docker container it only has access to the fonts that are installed in the container. In other words: <strong>donâ€™t panic if you donâ€™t see the font(s) you want.</strong>.</p>
</div>
</div>
<div id="8fb7be21" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> font_manager</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.core.display <span class="im">import</span> HTML</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>flist <span class="op">=</span> font_manager.findSystemFonts()</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> []</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> fname <span class="kw">in</span> flist:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        names.append(font_manager.FontProperties(fname<span class="op">=</span>fname).get_name())</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">RuntimeError</span>:</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span> <span class="co"># Think the issue is emoji-support/colour fonts</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Found </span><span class="sc">{</span><span class="bu">len</span>(<span class="bu">set</span>(names))<span class="sc">}</span><span class="ss"> fonts."</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_html(fontname):</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">"&lt;p&gt;</span><span class="sc">{font}</span><span class="st">: &lt;span style='font-family:</span><span class="sc">{font}</span><span class="st">; font-size: 18px;'&gt;</span><span class="sc">{font}</span><span class="st">&lt;/p&gt;"</span>.<span class="bu">format</span>(font<span class="op">=</span>fontname)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>code <span class="op">=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join([make_html(font) <span class="cf">for</span> font <span class="kw">in</span> <span class="bu">sorted</span>(<span class="bu">set</span>(names))])</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>HTML(<span class="st">"&lt;div style='column-count: 2;'&gt;</span><span class="sc">{}</span><span class="st">&lt;/div&gt;"</span>.<span class="bu">format</span>(code))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Found 62 fonts.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div style="column-count: 2;"><p>Antonio: <span style="font-family:Antonio; font-size: 18px;">Antonio</span></p>
<p>Big Shoulders Display: <span style="font-family:Big Shoulders Display; font-size: 18px;">Big Shoulders Display</span></p>
<p>EB Garamond: <span style="font-family:EB Garamond; font-size: 18px;">EB Garamond</span></p>
<p>Fira Sans: <span style="font-family:Fira Sans; font-size: 18px;">Fira Sans</span></p>
<p>Fira Sans Condensed: <span style="font-family:Fira Sans Condensed; font-size: 18px;">Fira Sans Condensed</span></p>
<p>Font Awesome 5 Brands: <span style="font-family:Font Awesome 5 Brands; font-size: 18px;">Font Awesome 5 Brands</span></p>
<p>Font Awesome 5 Free: <span style="font-family:Font Awesome 5 Free; font-size: 18px;">Font Awesome 5 Free</span></p>
<p>Font Awesome 6 Brands: <span style="font-family:Font Awesome 6 Brands; font-size: 18px;">Font Awesome 6 Brands</span></p>
<p>Font Awesome 6 Free: <span style="font-family:Font Awesome 6 Free; font-size: 18px;">Font Awesome 6 Free</span></p>
<p>Font Awesome v4 Compatibility: <span style="font-family:Font Awesome v4 Compatibility; font-size: 18px;">Font Awesome v4 Compatibility</span></p>
<p>Geist Mono: <span style="font-family:Geist Mono; font-size: 18px;">Geist Mono</span></p>
<p>Inconsolata: <span style="font-family:Inconsolata; font-size: 18px;">Inconsolata</span></p>
<p>Inconsolata Condensed: <span style="font-family:Inconsolata Condensed; font-size: 18px;">Inconsolata Condensed</span></p>
<p>Inconsolata Expanded: <span style="font-family:Inconsolata Expanded; font-size: 18px;">Inconsolata Expanded</span></p>
<p>Inconsolata ExtraCondensed: <span style="font-family:Inconsolata ExtraCondensed; font-size: 18px;">Inconsolata ExtraCondensed</span></p>
<p>Inconsolata ExtraExpanded: <span style="font-family:Inconsolata ExtraExpanded; font-size: 18px;">Inconsolata ExtraExpanded</span></p>
<p>Inconsolata SemiCondensed: <span style="font-family:Inconsolata SemiCondensed; font-size: 18px;">Inconsolata SemiCondensed</span></p>
<p>Inconsolata SemiExpanded: <span style="font-family:Inconsolata SemiExpanded; font-size: 18px;">Inconsolata SemiExpanded</span></p>
<p>Inconsolata UltraCondensed: <span style="font-family:Inconsolata UltraCondensed; font-size: 18px;">Inconsolata UltraCondensed</span></p>
<p>Inconsolata UltraExpanded: <span style="font-family:Inconsolata UltraExpanded; font-size: 18px;">Inconsolata UltraExpanded</span></p>
<p>Inter Tight: <span style="font-family:Inter Tight; font-size: 18px;">Inter Tight</span></p>
<p>JetBrains Mono: <span style="font-family:JetBrains Mono; font-size: 18px;">JetBrains Mono</span></p>
<p>Latin Modern Math: <span style="font-family:Latin Modern Math; font-size: 18px;">Latin Modern Math</span></p>
<p>Latin Modern Mono: <span style="font-family:Latin Modern Mono; font-size: 18px;">Latin Modern Mono</span></p>
<p>Latin Modern Mono Caps: <span style="font-family:Latin Modern Mono Caps; font-size: 18px;">Latin Modern Mono Caps</span></p>
<p>Latin Modern Mono Light: <span style="font-family:Latin Modern Mono Light; font-size: 18px;">Latin Modern Mono Light</span></p>
<p>Latin Modern Mono Light Cond: <span style="font-family:Latin Modern Mono Light Cond; font-size: 18px;">Latin Modern Mono Light Cond</span></p>
<p>Latin Modern Mono Prop: <span style="font-family:Latin Modern Mono Prop; font-size: 18px;">Latin Modern Mono Prop</span></p>
<p>Latin Modern Mono Prop Light: <span style="font-family:Latin Modern Mono Prop Light; font-size: 18px;">Latin Modern Mono Prop Light</span></p>
<p>Latin Modern Mono Slanted: <span style="font-family:Latin Modern Mono Slanted; font-size: 18px;">Latin Modern Mono Slanted</span></p>
<p>Latin Modern Roman: <span style="font-family:Latin Modern Roman; font-size: 18px;">Latin Modern Roman</span></p>
<p>Latin Modern Roman Caps: <span style="font-family:Latin Modern Roman Caps; font-size: 18px;">Latin Modern Roman Caps</span></p>
<p>Latin Modern Roman Demi: <span style="font-family:Latin Modern Roman Demi; font-size: 18px;">Latin Modern Roman Demi</span></p>
<p>Latin Modern Roman Dunhill: <span style="font-family:Latin Modern Roman Dunhill; font-size: 18px;">Latin Modern Roman Dunhill</span></p>
<p>Latin Modern Roman Slanted: <span style="font-family:Latin Modern Roman Slanted; font-size: 18px;">Latin Modern Roman Slanted</span></p>
<p>Latin Modern Roman Unslanted: <span style="font-family:Latin Modern Roman Unslanted; font-size: 18px;">Latin Modern Roman Unslanted</span></p>
<p>Latin Modern Sans: <span style="font-family:Latin Modern Sans; font-size: 18px;">Latin Modern Sans</span></p>
<p>Latin Modern Sans Demi Cond: <span style="font-family:Latin Modern Sans Demi Cond; font-size: 18px;">Latin Modern Sans Demi Cond</span></p>
<p>Latin Modern Sans Quotation: <span style="font-family:Latin Modern Sans Quotation; font-size: 18px;">Latin Modern Sans Quotation</span></p>
<p>League Gothic: <span style="font-family:League Gothic; font-size: 18px;">League Gothic</span></p>
<p>Liberation Mono: <span style="font-family:Liberation Mono; font-size: 18px;">Liberation Mono</span></p>
<p>Liberation Sans: <span style="font-family:Liberation Sans; font-size: 18px;">Liberation Sans</span></p>
<p>Liberation Serif: <span style="font-family:Liberation Serif; font-size: 18px;">Liberation Serif</span></p>
<p>Lobster: <span style="font-family:Lobster; font-size: 18px;">Lobster</span></p>
<p>Micro 5: <span style="font-family:Micro 5; font-size: 18px;">Micro 5</span></p>
<p>Roboto Flex: <span style="font-family:Roboto Flex; font-size: 18px;">Roboto Flex</span></p>
<p>Roboto Mono: <span style="font-family:Roboto Mono; font-size: 18px;">Roboto Mono</span></p>
<p>Roboto Slab: <span style="font-family:Roboto Slab; font-size: 18px;">Roboto Slab</span></p>
<p>Satisfy: <span style="font-family:Satisfy; font-size: 18px;">Satisfy</span></p>
<p>Sedan: <span style="font-family:Sedan; font-size: 18px;">Sedan</span></p>
<p>Sedan SC: <span style="font-family:Sedan SC; font-size: 18px;">Sedan SC</span></p>
<p>Silkscreen: <span style="font-family:Silkscreen; font-size: 18px;">Silkscreen</span></p>
<p>Source Code Pro: <span style="font-family:Source Code Pro; font-size: 18px;">Source Code Pro</span></p>
<p>Source Sans 3: <span style="font-family:Source Sans 3; font-size: 18px;">Source Sans 3</span></p>
<p>Source Sans Pro: <span style="font-family:Source Sans Pro; font-size: 18px;">Source Sans Pro</span></p>
<p>Source Serif 4: <span style="font-family:Source Serif 4; font-size: 18px;">Source Serif 4</span></p>
<p>Source Serif 4 18pt: <span style="font-family:Source Serif 4 18pt; font-size: 18px;">Source Serif 4 18pt</span></p>
<p>Source Serif 4 36pt: <span style="font-family:Source Serif 4 36pt; font-size: 18px;">Source Serif 4 36pt</span></p>
<p>Source Serif 4 48pt: <span style="font-family:Source Serif 4 48pt; font-size: 18px;">Source Serif 4 48pt</span></p>
<p>Spectral: <span style="font-family:Spectral; font-size: 18px;">Spectral</span></p>
<p>Spectral SC: <span style="font-family:Spectral SC; font-size: 18px;">Spectral SC</span></p>
<p>Unica One: <span style="font-family:Unica One; font-size: 18px;">Unica One</span></p></div>
</div>
</div>
</section>
<section id="using-fontconfig" class="level3">
<h3 class="anchored" data-anchor-id="using-fontconfig">Using Fontconfig</h3>
<p><code>fontconfig</code> is the base Linux utility for managing fonts. We can list font using <code>fc-list</code> and then a set of â€˜switchesâ€™ determining the kind of information we want back. Since fontconfig doesnâ€™t exist on OSX or Windows, youâ€™ll need to do some more investigating and poking around to get these details on a <code>conda</code> install (Iâ€™ll show an option further down)â€¦</p>
<p>Here we ask fontconfig to format the output so that we only get the first part of the family name, and then we pipe (recall <code>|</code> sends output from one utility to another!) the output of that to <code>sort</code>, which sorts the output, and <code>uniq</code> which removes duplicates (which there will be because there are <strong>bold</strong>, <em>italic</em>, small-caps, etc. versions of each font). To make better sense of this you can always try playing around with all three steps in the output below!</p>
<div id="eadff7ab" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fonts <span class="op">=</span> <span class="op">!</span> fc<span class="op">-</span><span class="bu">list</span> <span class="op">--</span><span class="bu">format</span><span class="op">=</span><span class="st">"%</span><span class="sc">{family[0]}</span><span class="ch">\n</span><span class="st">"</span> <span class="op">|</span> sort <span class="op">|</span> uniq</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fonts[:<span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Antonio', 'Big Shoulders Display', 'Bitstream Charter', 'Courier', 'EB Garamond']</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Capturing output
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that weâ€™re able to capture the output of an external application (called via the Terminal) with <code>fonts = ! ...</code>. This can be useful when something is easy to do on the command line but hard to do in Python.</p>
</div>
</div>
<p>The below option also pipes output from fonctconfig, but to the <code>grep</code> utility which checks each line for the character sequence <code>Liberation</code>. Now weâ€™re asking fontconfig to include <code>style</code> details which will relate to both weight (regular, bold, extra bold, light, etc.) and italic, bold, small caps, etc.</p>
<div id="b98cb1d9" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fonts <span class="op">=</span> <span class="op">!</span> fc<span class="op">-</span><span class="bu">list</span> : family style <span class="op">|</span> grep <span class="st">"Liberation"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(fonts)[:<span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Liberation Mono:style=Bold', 'Liberation Mono:style=Bold Italic', 'Liberation Mono:style=Italic', 'Liberation Mono:style=Regular', 'Liberation Sans:style=Bold']</code></pre>
</div>
</div>
<p>You can find more examples <a href="https://www.geeksforgeeks.org/fc-list-command-in-linux-with-examples/">here</a>, a more detailed set of instructions <a href="https://www.freedesktop.org/software/fontconfig/fontconfig-user.html">here</a>, and even information about (for example) <a href="https://thottingal.in/blog/2016/03/04/fontconfig-language-matching/">supported languages</a> based on <a href="http://www.i18nguy.com/unicode/language-identifiers.html">RFC 3066</a>.</p>
<p>Here are the languages supported by the Ubuntu Light font:</p>
<div id="53b95528" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>langs <span class="op">=</span> <span class="op">!</span> fc<span class="op">-</span><span class="bu">list</span> <span class="st">"Liberation Mono"</span> : lang</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(langs)[:<span class="dv">5</span>], <span class="st">"..."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[':lang=aa|ab|af|ast|av|ay|az-az|ba|bm|be|bg|bi|bin|br|bs|bua|ca|ce|ch|chm|co|cs|cu|cv|cy|da|de|el|en|eo|es|et|eu|fi|fj|fo|fr|ff|fur|fy|ga|gd|gl|gn|gv|ha|haw|he|ho|hr|hu|ia|ig|id|ie|ik|io|is|it|kaa|ki|kk|kl|ku-am|kum|kv|kw|ky|la|lb|lez|ln|lt|lv|mg|mh|mi|mk|mo|mt|nb|nds|nl|nn|no|nr|nso|ny|oc|om|os|pl|pt|rm|ro|ru|sah|sco|se|sel|sh|shs|sk|sl|sm|sma|smj|smn|sms|so|sq|sr|ss|st|sv|sw|tg|tk|tl|tn|to|tr|ts|tt|tw|tyv|uk|uz|ve|vi|vo|vot|wa|wen|wo|xh|yap|yi|yo|zu|ak|an|ber-dz|crh|csb|ee|fat|fil|hsb|ht|hz|jv|kab|kj|kr|ku-tr|kwm|lg|li|mn-mn|ms|na|ng|nv|pap-an|pap-aw|qu|quz|rn|rw|sc|sg|sn|su|ty|za|agr|ayc|bem|dsb|lij|mfe|mhr|miq|mjw|nhn|niu|rif|sgs|szl|tpi|unm|wae|yuw'] ...</code></pre>
</div>
</div>
<p>Here are the monospace fonts installed:</p>
<div id="3ba3bcfd" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>monos <span class="op">=</span> <span class="op">!</span> fc<span class="op">-</span><span class="bu">list</span> :spacing<span class="op">=</span>mono : family <span class="op">|</span> sort <span class="op">|</span> uniq</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(monos)[:<span class="dv">5</span>], <span class="st">"..."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Courier', 'Geist Mono', 'Geist Mono,Geist Mono Black', 'Geist Mono,Geist Mono ExtraBold', 'Geist Mono,Geist Mono ExtraLight'] ...</code></pre>
</div>
</div>
</section>
<section id="fontdicts" class="level3">
<h3 class="anchored" data-anchor-id="fontdicts">Fontdicts</h3>
<p>Now that we know whatâ€™s available, the next step is to set up some useful defaults that we can re-use across multiple plots to ensure consistency of output. The format for specifying fonts on a per-figure basis is a dictionary, so where you see <code>fontdict</code> in the <code>matplotlib</code> <a href="https://matplotlib.org/stable/gallery/text_labels_and_annotations/text_fontdict.html">documentation</a> the following should work:</p>
<p>Hereâ€™s the example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>font <span class="op">=</span> {<span class="st">'family'</span>: <span class="st">'serif'</span>,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">'color'</span>:  <span class="st">'darkred'</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">'weight'</span>: <span class="st">'normal'</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'size'</span>: <span class="dv">16</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="5952a01a" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ff<span class="op">=</span><span class="st">'Liberation Sans'</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>tfont <span class="op">=</span> {<span class="st">'fontname'</span>:ff}</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>bfont <span class="op">=</span> {<span class="st">'fontname'</span>:ff, <span class="st">'weight'</span>:<span class="st">'bold'</span>, <span class="st">'horizontalalignment'</span>:<span class="st">'left'</span>}</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>afont <span class="op">=</span> {<span class="st">'fontname'</span>:ff}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I am setting the â€˜title fontâ€™ (<code>tfont</code>) and â€˜body copy fontâ€™ (<code>bfont</code>) and â€˜axis fontâ€™ (<code>afont</code>) here to use in the output below. You can pick another font and see what happens.</p>
</section>
<section id="using-fonts" class="level3">
<h3 class="anchored" data-anchor-id="using-fonts">2.3: Using Fonts</h3>
<p>At this point weâ€™re going to work towards a kind of â€˜atlasâ€™ that would make it easy to compare some features for different London boroughs. I basically implemented a the basic <code>matplotlib</code> version of QGISâ€™ Atlas functionality.</p>
<div id="f61d0349" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This will be whatever LA you processed last week</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>LA <span class="op">=</span> <span class="st">'Waltham Forest'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="0364e625" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>msoa_gdf <span class="op">=</span> gpd.read_parquet(os.path.join(<span class="st">'data'</span>,<span class="st">'geo'</span>,<span class="ss">f'</span><span class="sc">{</span>LA<span class="sc">}</span><span class="ss">-MSOA_data.geoparquet'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ee535eef" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>median_gdf  <span class="op">=</span> msoa_gdf[[<span class="st">'MSOA11CD'</span>,<span class="st">'median_price'</span>,<span class="st">'geometry'</span>]]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>listing_gdf <span class="op">=</span> msoa_gdf[[<span class="st">'MSOA11CD'</span>,<span class="st">'listing_count'</span>,<span class="st">'geometry'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a5379554" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-defaults" class="level3">
<h3 class="anchored" data-anchor-id="the-defaults">The Defaults</h3>
<p>Here is a demonstration of some of the ways you can adjust features in a Python matplotlib plot. Iâ€™m not suggesting either of these is a <em>good</em> output, but thatâ€™s not the point! The idea is to see the various ways you can tweak a plotâ€¦ And notice that weâ€™ve not yet changed any fonts. And it shows.</p>
<div id="1c65a426" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up a 1 x 2 plot (you can also leave off the nrows= and ncols=)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>f,axes <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ax1 will be the first plot on the left, ax2 will be on the right;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># a 2 (or more) *row* plot will return a list of lists... 1 list/row.</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> axes[<span class="dv">0</span>]</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> axes[<span class="dv">1</span>]</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Left plot is the median price</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>median_gdf.plot(column<span class="op">=</span><span class="st">'median_price'</span>, ax<span class="op">=</span>ax1, legend<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"Median Price per MSOA"</span>)<span class="op">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn off the frame, one side of the plat at a time</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>ax1.spines[<span class="st">'top'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>ax1.spines[<span class="st">'right'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>ax1.spines[<span class="st">'bottom'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>ax1.spines[<span class="st">'left'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the labels</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">"Easting"</span>)<span class="op">;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">"Northing"</span>)<span class="op">;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Right plot is the number of listings; note</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="co"># here the use of both zorder (which is the </span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 'stacking order' of elements on the plot, and</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="co"># the legend_kwds (keywords) to change the </span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="co"># orientation of the plot to horizontal</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>listing_gdf.plot(column<span class="op">=</span><span class="st">'listing_count'</span>, ax<span class="op">=</span>ax2, legend<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'plasma'</span>, zorder<span class="op">=</span><span class="dv">1</span>, </span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>                 legend_kwds<span class="op">=</span>{<span class="st">"orientation"</span>: <span class="st">"horizontal"</span>})</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"Count of Listings per MSOA"</span>)<span class="op">;</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a background colour for the plot</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>ax2.set_facecolor((<span class="fl">.4</span>, <span class="fl">.4</span>, <span class="fl">.4</span>, <span class="fl">.2</span>))</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Add grid lines and set their zorder to</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="co"># below that of the data on the plot</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>plt.grid(visible<span class="op">=</span><span class="va">True</span>, which<span class="op">=</span><span class="st">'major'</span>, axis<span class="op">=</span><span class="st">'both'</span>, color<span class="op">=</span><span class="st">'w'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, zorder<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>ax2.set_axisbelow(<span class="va">True</span>)</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a><span class="co"># This is equivalent to the ax1.spines... </span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="co"># above, but if you use it here you lose</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a><span class="co"># the background to the plot as well!</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.gca().set(frame_on=False)</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the labels on the ticks of the </span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a><span class="co"># axes (meaning: remove the numbers on </span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a><span class="co"># x- and y-axes).</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>ax2.set_xticklabels([])</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>ax2.set_yticklabels([])</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the labels</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">"Easting"</span>)<span class="op">;</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">"Northing"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Practical-10-Presenting_Data_files/figure-html/cell-14-output-1.png" width="693" height="498" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="improving-on-defaults" class="level3">
<h3 class="anchored" data-anchor-id="improving-on-defaults">Improving on Defaults</h3>
<div id="a97c9d8a" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>f,axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>,figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the plots</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>median_gdf.plot(column<span class="op">=</span><span class="st">'median_price'</span>, ax<span class="op">=</span>axes[<span class="dv">0</span>], legend<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>listing_gdf.plot(column<span class="op">=</span><span class="st">'listing_count'</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>], legend<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'plasma'</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> axes:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    ax.axis(<span class="st">'off'</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Note that here, set_facebolor doesn't work,</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># presumably because the axis is 'off'</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    ax.set_facecolor((<span class="fl">.4</span>, <span class="fl">.4</span>, <span class="fl">.4</span>, <span class="fl">.2</span>))</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the 'super-title', but notice that it is not </span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co"># longer either centered (x=0.025) or centre-aligned</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co"># (horizonal alignment=left). We also see **tfont, which</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co"># is a way of expading the 'tfont' dictionary into a </span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co"># set of parameters to a function call. We do the same</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co"># for the titles on each figure, but passing a different</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co"># fontdict.</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>f.suptitle(LA, x<span class="op">=</span><span class="fl">0.025</span>, ha<span class="op">=</span><span class="st">'left'</span>, size<span class="op">=</span><span class="dv">24</span>, <span class="op">**</span>tfont)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Median Price'</span>, size<span class="op">=</span><span class="dv">20</span>, <span class="op">**</span>afont)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Count'</span>, size<span class="op">=</span><span class="dv">20</span>, <span class="op">**</span>afont)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co"># And add a short piece of text below the borough</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>plt.figtext(x<span class="op">=</span><span class="fl">0.025</span>, y<span class="op">=</span><span class="fl">0.92</span>, linespacing<span class="op">=</span><span class="fl">1.4</span>, va<span class="op">=</span><span class="st">'top'</span>, size<span class="op">=</span><span class="dv">12</span>, </span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>            s<span class="op">=</span><span class="ss">f"Total listings: </span><span class="sc">{</span>listing_gdf[<span class="st">'listing_count'</span>]<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">:,.0f}</span><span class="ch">\n</span><span class="ss">Median price: $</span><span class="sc">{</span>median_gdf[<span class="st">'median_price'</span>]<span class="sc">.</span>median()<span class="sc">:,.2f}</span><span class="ss">"</span>, <span class="op">**</span>bfont)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Practical-10-Presenting_Data_files/figure-html/cell-15-output-1.png" width="708" height="520" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="create-an-atlas" class="level1">
<h1>Create an Atlas</h1>
<section id="adding-picture-in-picture" class="level2">
<h2 class="anchored" data-anchor-id="adding-picture-in-picture">Adding Picture-in-Picture</h2>
<p>Weâ€™re now going to emulate a <em>bit</em> of QGISâ€™ Atlas function by creating two subplots and then adding a <em>third</em> plot afterwards that shows where the borough is.</p>
<div id="e317c19b" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>f,axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">3</span>,gridspec_kw<span class="op">=</span>{<span class="st">'width_ratios'</span>:[<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">4</span>]}, figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 0 is basically being used as a 'spacer' </span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># as you'll see below</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1 is the median price</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>median_gdf.plot(column<span class="op">=</span><span class="st">'median_price'</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>], legend<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Median Price'</span>, size<span class="op">=</span><span class="dv">20</span>, <span class="op">**</span>afont)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2 is the count of listings</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>listing_gdf.plot(column<span class="op">=</span><span class="st">'listing_count'</span>, ax<span class="op">=</span>axes[<span class="dv">2</span>], legend<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'plasma'</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_title(<span class="st">'Count'</span>, size<span class="op">=</span><span class="dv">20</span>, <span class="op">**</span>afont)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># For plots 1 and 2... if you were doing this a lot it could be a function!</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> axes[<span class="dv">1</span>:]:</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    ax.set_facecolor((<span class="fl">.9</span>, <span class="fl">.9</span>, <span class="fl">.9</span>, <span class="fl">.5</span>))</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    ax.grid(visible<span class="op">=</span><span class="va">True</span>, which<span class="op">=</span><span class="st">'major'</span>, axis<span class="op">=</span><span class="st">'both'</span>, color<span class="op">=</span><span class="st">'w'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, zorder<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    ax.set_axisbelow(<span class="va">True</span>)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    ax.spines[<span class="st">'top'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    ax.spines[<span class="st">'bottom'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    ax.spines[<span class="st">'left'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    ax.spines[<span class="st">'right'</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    ax.set_xticklabels([])</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    ax.set_yticklabels([])</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">'both'</span>, which<span class="op">=</span><span class="st">'both'</span>, length<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a *third* chart that we use as a kind of 'PiP'</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="co"># to show which borough we're talking about. The </span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a><span class="co"># add_axes call is here taking information about the</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="co"># positioning and size of the additional figure.</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Disable ax2.axis('off') if you want to see the</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="co"># figure in full.</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>ax3 <span class="op">=</span> f.add_axes([<span class="fl">0.015</span>, <span class="fl">0.7</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>])</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>spath <span class="op">=</span> <span class="st">'https://github.com/jreades/fsds/blob/master/data/src/'</span> <span class="co"># source path</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>ddir  <span class="op">=</span> os.path.join(<span class="st">'data'</span>,<span class="st">'geo'</span>) <span class="co">#&nbsp;destination directory</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>boros <span class="op">=</span> gpd.read_file( cache_data(spath<span class="op">+</span><span class="st">'Boroughs.gpkg?raw=true'</span>, ddir) )</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>boros.plot(facecolor<span class="op">=</span><span class="st">'lightgrey'</span>, edgecolor<span class="op">=</span><span class="st">'w'</span>, linewidth<span class="op">=</span><span class="dv">1</span>, ax<span class="op">=</span>ax3)</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>boros[boros.NAME<span class="op">==</span>LA].plot(facecolor<span class="op">=</span><span class="st">'r'</span>, edgecolor<span class="op">=</span><span class="st">'none'</span>, hatch<span class="op">=</span><span class="st">'///'</span>, ax<span class="op">=</span>ax3)</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>ax3.axis(<span class="st">'off'</span>)</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the 'super-title', but notice that it is not </span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a><span class="co"># longer either centered (x=0.025) or centre-aligned</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a><span class="co"># (horizonal alignment=left). We also see **tfont, which</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a><span class="co"># is a way of expanding the 'tfont' dictionary into a </span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a><span class="co"># set of parameters to a function call. We do the same</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a><span class="co"># for the titles on each figure, but passing a different</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a><span class="co"># fontdict.</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>f.suptitle(LA, x<span class="op">=</span><span class="fl">0.025</span>, ha<span class="op">=</span><span class="st">'left'</span>, size<span class="op">=</span><span class="dv">24</span>, <span class="op">**</span>tfont)</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a><span class="co"># And add a short piece of text below the borough</span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>plt.figtext(x<span class="op">=</span><span class="fl">0.025</span>, y<span class="op">=</span><span class="fl">0.65</span>, s<span class="op">=</span><span class="ss">f"Total listings: </span><span class="sc">{</span>listing_gdf[<span class="st">'listing_count'</span>]<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">:,.0f}</span><span class="ss">"</span>, size<span class="op">=</span><span class="dv">12</span>, <span class="op">**</span>bfont)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ data/geo/Boroughs.gpkg found locally!</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Practical-10-Presenting_Data_files/figure-html/cell-16-output-2.png" width="719" height="520" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bonus-achievement-unlocked" class="level2">
<h2 class="anchored" data-anchor-id="bonus-achievement-unlocked">Bonus Achievement Unlocked!</h2>
<p>If you have the time and inclination, see if you can convert the above to an <em>actual</em> atlas output:</p>
<ol type="1">
<li>Youâ€™ll want to turn this plot into a function so as to be able to produce (and save) the map for <em>every</em> borough.</li>
<li>Youâ€™ll even need to parameterise the filename so that you save to <em>different</em> PNG files as well as going back to see how we generated the listing and pricing data frames for the Local Authorityâ€¦</li>
<li>And youâ€™ll <em>also</em> need to make sure that you ensure a consistent colour bar (for all of London, because the median price and number of listings will vary rather a lot by LA)</li>
<li>Then thereâ€™s the placement of the PiP for some boroughs with long names</li>
<li>And finally, you might consider adding some more text to atlasâ€“maybe pull some content from Wikipedia using Beautiful Soup (<code>bs4</code>)?</li>
</ol>
</section>
</section>
<section id="think-text" class="level1">
<h1>Think Text!</h1>
<p>I also wanted to draw your attention to this <a href="https://blog.datawrapper.de/text-in-data-visualizations/">outstanding piece</a> on using text effectively in data visualisation: we often add labels as afterthoughts without too much regard for where they go or how they look; however, getting the content, positioning, size, and even font/font-weight â€˜rightâ€™ can make all the difference to the effectiveness of your chart! The illustrations are top-notch.</p>
<p>And see the bibliography at the end!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bookmark Me!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Basically, bookmark <a href="https://blog.datawrapper.de/text-in-data-visualizations/">this blog post</a> and refer to it every time you are making a map or chart.</p>
</div>
</div>
</section>
<section id="using-bokeh" class="level1">
<h1>Using Bokeh</h1>
<p>Bokeh can do a <em>lot</em> more than this, but I just wanted to give you a flavour of the other visualisation tools supported by Python. This obviously works <em>very</em> differently in setup and use.</p>
<div id="dc14082d" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>gdf_la <span class="op">=</span> gpd.read_parquet(os.path.join(<span class="st">'data'</span>,<span class="st">'geo'</span>,<span class="st">'Listings_with_LA.geoparquet'</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>msoas  <span class="op">=</span> gpd.read_parquet(os.path.join(<span class="st">'data'</span>,<span class="st">'geo'</span>,<span class="st">'London_MSOA_Names.geoparquet'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="for-a-chart" class="level2">
<h2 class="anchored" data-anchor-id="for-a-chart">For a Chart</h2>
<p>Group the listings by Borough and Room Type, and aggregate by median price, also producing a count variable for the number of listings of each type in each Borough.</p>
<div id="d6dde4a3" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>la_tots <span class="op">=</span> gdf_la[gdf_la.NAME<span class="op">==</span>LA].groupby(by<span class="op">=</span><span class="st">'room_type'</span>, observed<span class="op">=</span><span class="va">False</span>).agg(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                            {<span class="st">'price'</span>:<span class="st">'median'</span>, <span class="st">'listing_url'</span>:<span class="st">'count'</span>}</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                        ).reset_index().rename(columns<span class="op">=</span>{<span class="st">'listing_url'</span>:<span class="st">'count'</span>})</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>la_tots</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">room_type</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Entire home/apt</td>
<td>117.0</td>
<td>946</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Hotel room</td>
<td>NaN</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Private room</td>
<td>47.0</td>
<td>687</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Shared room</td>
<td>24.5</td>
<td>6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="d780534f" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.io <span class="im">import</span> output_notebook, show</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.plotting <span class="im">import</span> figure</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.models <span class="im">import</span> ColumnDataSource, HoverTool</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.palettes <span class="im">import</span> Spectral4</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.models <span class="im">import</span> CustomJS, Dropdown</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>output_notebook()</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>room_types <span class="op">=</span> la_tots.room_type.to_list()</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>prices     <span class="op">=</span> la_tots.price.to_list()</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>counts     <span class="op">=</span> la_tots[<span class="st">'count'</span>].to_list()</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add hover tooltip</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>source <span class="op">=</span> ColumnDataSource(data<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    rt<span class="op">=</span>room_types,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    count<span class="op">=</span>counts,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    price<span class="op">=</span>prices,</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>TOOLTIPS <span class="op">=</span> [</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"Room Type"</span>, <span class="st">"@rt"</span>),</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"Number of Listings"</span>, <span class="st">"@count{,}"</span>),</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"Median Price"</span>, <span class="st">"$@price{,}/night"</span>)</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> figure(x_range<span class="op">=</span>room_types, height<span class="op">=</span><span class="dv">300</span>, tooltips<span class="op">=</span>TOOLTIPS,</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>           title<span class="op">=</span><span class="ss">f"Median Price by Room Type in </span><span class="sc">{</span>LA<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>           toolbar_location<span class="op">=</span><span class="va">None</span>, tools<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>p.vbar(x<span class="op">=</span><span class="st">'rt'</span>, top<span class="op">=</span><span class="st">'count'</span>, width<span class="op">=</span><span class="fl">0.9</span>, source<span class="op">=</span>source)</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>p.xgrid.grid_line_color <span class="op">=</span> <span class="va">None</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>p.y_range.start <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>show(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
    <style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="d2dd616f-dffc-4e3f-acfb-78b75391153d">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
'use strict';
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    function drop(id) {
      const view = Bokeh.index.get_by_id(id)
      if (view != null) {
        view.model.document.clear()
        Bokeh.index.delete(view)
      }
    }

    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;

    // Clean up Bokeh references
    if (id != null) {
      drop(id)
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim()
            drop(id)
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded(error = null) {
    const el = document.getElementById("d2dd616f-dffc-4e3f-acfb-78b75391153d");
    if (el != null) {
      const html = (() => {
        if (typeof root.Bokeh === "undefined") {
          if (error == null) {
            return "BokehJS is loading ...";
          } else {
            return "BokehJS failed to load.";
          }
        } else {
          const prefix = `BokehJS ${root.Bokeh.version}`;
          if (error == null) {
            return `${prefix} successfully loaded.`;
          } else {
            return `${prefix} <b>encountered errors</b> while loading and may not function as expected.`;
          }
        }
      })();
      el.innerHTML = html;

      if (error != null) {
        const wrapper = document.createElement("div");
        wrapper.style.overflow = "auto";
        wrapper.style.height = "5em";
        wrapper.style.resize = "vertical";
        const content = document.createElement("div");
        content.style.fontFamily = "monospace";
        content.style.whiteSpace = "pre-wrap";
        content.style.backgroundColor = "rgb(255, 221, 221)";
        content.textContent = error.stack ?? error.toString();
        wrapper.append(content);
        el.append(wrapper);
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(() => display_loaded(error), 100);
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.6.1.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.6.1.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.6.1.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.6.1.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.6.1.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
      try {
            for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }

      } catch (error) {display_loaded(error);throw error;
      }if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("d2dd616f-dffc-4e3f-acfb-78b75391153d")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="f391f503-6b3f-4c89-9a3a-bc3bddc74a4b" data-root-id="p1085" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"ab795a5d-b9bf-4678-8f89-6d10e76872bf":{"version":"3.6.1","title":"Bokeh Application","roots":[{"type":"object","name":"Figure","id":"p1085","attributes":{"height":300,"x_range":{"type":"object","name":"FactorRange","id":"p1095","attributes":{"factors":["Entire home/apt","Hotel room","Private room","Shared room"]}},"y_range":{"type":"object","name":"DataRange1d","id":"p1087","attributes":{"start":0}},"x_scale":{"type":"object","name":"CategoricalScale","id":"p1096"},"y_scale":{"type":"object","name":"LinearScale","id":"p1097"},"title":{"type":"object","name":"Title","id":"p1088","attributes":{"text":"Median Price by Room Type in Waltham Forest"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1115","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1082","attributes":{"selected":{"type":"object","name":"Selection","id":"p1083","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1084"},"data":{"type":"map","entries":[["rt",["Entire home/apt","Hotel room","Private room","Shared room"]],["count",[946,0,687,6]],["price",[117.0,{"type":"number","value":"nan"},47.0,24.5]]]}}},"view":{"type":"object","name":"CDSView","id":"p1116","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1117"}}},"glyph":{"type":"object","name":"VBar","id":"p1112","attributes":{"x":{"type":"field","field":"rt"},"width":{"type":"value","value":0.9},"top":{"type":"field","field":"count"},"line_color":{"type":"value","value":"#1f77b4"},"fill_color":{"type":"value","value":"#1f77b4"}}},"nonselection_glyph":{"type":"object","name":"VBar","id":"p1113","attributes":{"x":{"type":"field","field":"rt"},"width":{"type":"value","value":0.9},"top":{"type":"field","field":"count"},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#1f77b4"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"VBar","id":"p1114","attributes":{"x":{"type":"field","field":"rt"},"width":{"type":"value","value":0.9},"top":{"type":"field","field":"count"},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#1f77b4"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1094","attributes":{"tools":[{"type":"object","name":"HoverTool","id":"p1108","attributes":{"renderers":"auto","tooltips":[["Room Type","@rt"],["Number of Listings","@count{,}"],["Median Price","$@price{,}/night"]]}}]}},"toolbar_location":null,"left":[{"type":"object","name":"LinearAxis","id":"p1103","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1104","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1105"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1106"}}}],"below":[{"type":"object","name":"CategoricalAxis","id":"p1098","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p1099"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p1100"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1101"}}}],"center":[{"type":"object","name":"Grid","id":"p1102","attributes":{"axis":{"id":"p1098"},"grid_line_color":null}},{"type":"object","name":"Grid","id":"p1107","attributes":{"dimension":1,"axis":{"id":"p1103"}}}]}}]}};
  const render_items = [{"docid":"ab795a5d-b9bf-4678-8f89-6d10e76872bf","roots":{"p1085":"f391f503-6b3f-4c89-9a3a-bc3bddc74a4b"},"root_ids":["p1085"]}];
  void root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
</div>
</section>
<section id="for-a-map" class="level2">
<h2 class="anchored" data-anchor-id="for-a-map">For a Map</h2>
<p>This is not the prettiest code, but it should workâ€¦</p>
<div id="7b68fc59" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.plotting <span class="im">import</span> figure</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.io <span class="im">import</span> output_file, show, output_notebook, push_notebook, export_png</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.models <span class="im">import</span> ColumnDataSource, GeoJSONDataSource, LinearColorMapper, ColorBar, HoverTool</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.plotting <span class="im">import</span> figure</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.palettes <span class="im">import</span> brewer</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#output_notebook()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b308cafd" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>msoadf <span class="op">=</span> gpd.sjoin(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>            gdf_la[gdf_la.NAME<span class="op">==</span>LA].reset_index(), </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>            msoas[msoas.Borough<span class="op">==</span>LA].drop(columns<span class="op">=</span>[<span class="st">'index_right'</span>]), predicate<span class="op">=</span><span class="st">'within'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="7e7827cf" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>msoagrdf <span class="op">=</span> msoadf.groupby(<span class="st">'MSOA11NM'</span>).agg({<span class="st">'price'</span>:[<span class="st">'median'</span>,<span class="st">'count'</span>]}).reset_index()</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>msoagrdf.columns<span class="op">=</span>[<span class="st">'msoa11nm'</span>,<span class="st">'median'</span>,<span class="st">'count'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I cobbled the mapping functions below together from two tutorials I found online (<a href="https://github.com/dmnfarrell/teaching/blob/master/geo/maps_python.ipynb">this one</a> and <a href="https://widdowquinn.github.io/Teaching-Data-Visualisation/exercises/interactive_bokeh_map/interactive_bokeh_map.html">this one</a>). As you can see, this is a very different approach to mapping data, but it has clear benefits for exploratory purposes and produces fast, interactive mapsâ€¦ and Iâ€™ve not even added selection and filtering tools!</p>
<div id="c3d6e8d3" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_geodatasource(gdf):    </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Get getjsondatasource from geopandas object"""</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    json_data <span class="op">=</span> json.dumps(json.loads(gdf.to_json()))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> GeoJSONDataSource(geojson <span class="op">=</span> json_data)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bokeh_plot_map(gdf, column<span class="op">=</span><span class="va">None</span>, title<span class="op">=</span><span class="st">''</span>):</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Plot bokeh map from GeoJSONDataSource """</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    geosource <span class="op">=</span> get_geodatasource(gdf)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    palette <span class="op">=</span> brewer[<span class="st">'OrRd'</span>][<span class="dv">8</span>]</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    palette <span class="op">=</span> palette[::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    vals <span class="op">=</span> gdf[column]</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Instantiate LinearColorMapper that linearly maps numbers in a range, into a sequence of colors.</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    color_mapper <span class="op">=</span> LinearColorMapper(palette<span class="op">=</span>palette, low<span class="op">=</span>vals.<span class="bu">min</span>(), high<span class="op">=</span>vals.<span class="bu">max</span>())</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    color_bar <span class="op">=</span> ColorBar(color_mapper<span class="op">=</span>color_mapper, label_standoff<span class="op">=</span><span class="dv">8</span>, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>                         location<span class="op">=</span>(<span class="dv">0</span>,<span class="dv">0</span>), orientation<span class="op">=</span><span class="st">'horizontal'</span>)</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    tools <span class="op">=</span> <span class="st">'wheel_zoom,pan,reset,hover'</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> figure(title <span class="op">=</span> title, height<span class="op">=</span><span class="dv">700</span>, width<span class="op">=</span><span class="dv">850</span>, toolbar_location<span class="op">=</span><span class="st">'right'</span>, tools<span class="op">=</span>tools)</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    p.add_tile(<span class="st">"CartoDB Positron"</span>, retina<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    p.xgrid.grid_line_color <span class="op">=</span> <span class="va">None</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    p.ygrid.grid_line_color <span class="op">=</span> <span class="va">None</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add patch renderer to figure</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    p.patches(<span class="st">'xs'</span>,<span class="st">'ys'</span>, source<span class="op">=</span>geosource, fill_alpha<span class="op">=</span><span class="fl">0.5</span>, line_width<span class="op">=</span><span class="fl">0.5</span>, line_color<span class="op">=</span><span class="st">'white'</span>,  </span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>              fill_color<span class="op">=</span>{<span class="st">'field'</span> :column , <span class="st">'transform'</span>: color_mapper})</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Specify figure layout.</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    p.add_layout(color_bar, <span class="st">'below'</span>)</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add hover</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    hover <span class="op">=</span> p.select_one(HoverTool)</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>    hover.point_policy <span class="op">=</span> <span class="st">"follow_mouse"</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    hover.tooltips <span class="op">=</span> [(<span class="st">"Borough"</span>, <span class="st">"@Borough"</span>),</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>                      (<span class="st">"Neighbourhood"</span>, <span class="st">"@msoa11hclnm"</span>),</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>                      (<span class="st">"Count of Listings"</span>, <span class="st">"@count"</span>),</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>                      (<span class="st">"Median Price"</span>, <span class="st">"$@median"</span>)]</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Reproject to Web Mercator:</p>
<div id="fab4939e" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>msoa_gdf <span class="op">=</span> pd.merge(msoagrdf, msoas, left_on<span class="op">=</span><span class="st">'msoa11nm'</span>, right_on<span class="op">=</span><span class="st">'MSOA11NM'</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>msoa_gdf <span class="op">=</span> msoa_gdf.set_geometry(<span class="st">'geometry'</span>).set_crs(<span class="st">'epsg:27700'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="c61f0714" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>msoageo <span class="op">=</span> msoa_gdf.to_crs(<span class="st">'epsg:3785'</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>msoageo.total_bounds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>array([-6.74542047e+03,  6.71906611e+06,  3.04361304e+03,  6.73637453e+06])</code></pre>
</div>
</div>
<p>And map it!</p>
<div id="bed1da42" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Need to drop the right geometry column</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># as Bokeh doesn't know how to handle two</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># and tries to 'serialise' the second geom.</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> bokeh_plot_map(msoageo.drop(columns<span class="op">=</span>[<span class="st">'geometry_right'</span>,<span class="st">'index_right'</span>]), <span class="st">'median'</span>, title<span class="op">=</span><span class="ss">f'MSOA-Level Activity in </span><span class="sc">{</span>LA<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>handle <span class="op">=</span> show(p, notebook_handle<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>push_notebook(handle<span class="op">=</span>handle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

  <div id="d67d7045-cbfb-4757-8e48-307ea231e8d3" data-root-id="p1124" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"1bbdf5f5-b493-437b-9fca-9544d6ea1379":{"version":"3.6.1","title":"Bokeh Application","roots":[{"type":"object","name":"Figure","id":"p1124","attributes":{"width":850,"height":700,"x_range":{"type":"object","name":"DataRange1d","id":"p1125"},"y_range":{"type":"object","name":"DataRange1d","id":"p1126"},"x_scale":{"type":"object","name":"LinearScale","id":"p1134"},"y_scale":{"type":"object","name":"LinearScale","id":"p1135"},"title":{"type":"object","name":"Title","id":"p1127","attributes":{"text":"MSOA-Level Activity in Waltham Forest"}},"renderers":[{"type":"object","name":"TileRenderer","id":"p1151","attributes":{"tile_source":{"type":"object","name":"WMTSTileSource","id":"p1150","attributes":{"url":"https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png","max_zoom":20,"attribution":"&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>"}}}},{"type":"object","name":"GlyphRenderer","id":"p1159","attributes":{"data_source":{"type":"object","name":"GeoJSONDataSource","id":"p1118","attributes":{"selected":{"type":"object","name":"Selection","id":"p1119","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1120"},"geojson":"{\"type\": \"FeatureCollection\", \"features\": [{\"id\": \"0\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 001\", \"median\": 97.0, \"count\": 17, \"MSOA11CD\": \"E02000895\", \"MSOA11NM\": \"Waltham Forest 001\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 7979, \"HHOLDRES\": 7962, \"COMESTRES\": 17, \"POPDEN\": 36.4, \"HHOLDS\": 3271, \"AVHHOLDSZ\": 2.4, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-726.0223184229787, 6735845.127400605], [-515.1563366320856, 6735799.868612546], [-329.46465368566464, 6735838.087946455], [-265.3972378363569, 6735690.70530883], [-5.180184656724896, 6735838.263302631], [146.21874085636756, 6735855.6367464475], [282.2426571315092, 6735526.492533388], [667.8269718675591, 6735476.883952503], [762.3608644478714, 6735320.363741438], [464.55459470552665, 6735158.405109017], [240.18094826395554, 6734661.27718344], [207.39891492055412, 6734386.227683657], [149.6884112584739, 6734337.523929639], [78.43062231522227, 6734213.032590084], [185.09599071280326, 6734147.393049545], [227.1598429370112, 6734017.732055352], [102.19542776571629, 6733994.423764475], [187.36375924218692, 6733823.750412365], [103.0942340175718, 6733803.447206883], [78.1171740200676, 6733735.032938902], [66.08562420478471, 6733705.711803747], [13.950313808150062, 6733623.555323587], [9.767955461339485, 6733662.916395769], [-154.85943509853553, 6733671.099996481], [-262.2715231266024, 6733509.174726206], [-290.8553596198338, 6733538.115637587], [-461.0841076300598, 6733417.531413256], [-786.3061081935283, 6733065.204480927], [-1006.0424846742363, 6733071.140655531], [-1126.4136496915437, 6732912.431125912], [-1059.3923067205371, 6732888.701242068], [-1065.4924017218868, 6732773.145538066], [-1369.6825487576968, 6732589.056826992], [-1278.2132011378312, 6732501.48512043], [-1154.772458618412, 6732501.9681645995], [-1166.38881695837, 6732382.770726272], [-1120.2288492254502, 6732344.76655678], [-1246.2704044761904, 6732278.266774045], [-1193.9974495428648, 6732196.479081012], [-1137.869992149727, 6732213.517302861], [-1188.0338522217173, 6732192.4347611535], [-1161.115513162901, 6732120.949199711], [-1193.5614424953064, 6732118.130918105], [-1673.5402603509467, 6732124.948450776], [-1675.762299541964, 6732237.985487419], [-1753.0563822377178, 6732241.527439455], [-1739.231014823853, 6732506.825088131], [-1706.3180812564206, 6732597.4699576935], [-1611.1738463185363, 6732650.252478222], [-1533.07037010251, 6732592.72194614], [-1527.291145348911, 6732665.55427953], [-1618.7650955312304, 6732737.9317424735], [-1903.4600125855168, 6732818.385044196], [-1912.4338798306894, 6732860.284190974], [-1966.9234778310881, 6732860.358875515], [-2041.7900582049824, 6732728.814443505], [-2001.979836216171, 6732783.879551398], [-1944.725766205311, 6732766.507781148], [-1999.105953491555, 6732655.464624205], [-2074.9322665948316, 6732636.650654941], [-2074.7797611916803, 6732524.5547430515], [-1957.127420427033, 6732503.717146117], [-1977.0503240932505, 6732356.789722312], [-2262.057635261344, 6732395.501877047], [-2221.4196891864112, 6732511.527232653], [-2261.825283619077, 6732573.230493856], [-2131.2628769695452, 6732876.330085533], [-2251.3063862196545, 6732937.699365079], [-1701.3887296287915, 6734045.122881887], [-1519.6583877394482, 6734427.148946471], [-1488.4454718122577, 6734518.810726369], [-1474.6262690797832, 6734563.602686844], [-1465.977354527596, 6734618.201386078], [-1295.82174697854, 6735192.078477092], [-1186.6614431187, 6736321.2980425], [-978.3376898069047, 6736333.147252711], [-847.6913195488121, 6736374.527972049], [-639.4811623991901, 6736308.808434867], [-762.03331296643, 6736010.3127008965], [-726.0223184229787, 6735845.127400605]]]]}}, {\"id\": \"1\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 002\", \"median\": 58.0, \"count\": 14, \"MSOA11CD\": \"E02000896\", \"MSOA11NM\": \"Waltham Forest 002\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8814, \"HHOLDRES\": 8719, \"COMESTRES\": 95, \"POPDEN\": 31.3, \"HHOLDS\": 3758, \"AVHHOLDSZ\": 2.3, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[1280.1588835854047, 6735463.408454401], [2117.6228290712006, 6735249.553921157], [2413.6170042579247, 6735283.464407333], [2707.558172588129, 6735403.373967452], [2747.937351378116, 6734793.938342228], [2979.1025429413407, 6734716.98727338], [2929.4217455695966, 6734494.982139505], [2986.3928961520733, 6734351.114226283], [3043.6130394184015, 6734228.402456458], [2905.747976013733, 6733898.849346657], [2870.530818517277, 6733780.51397413], [2832.5574860345537, 6733552.303479974], [2607.2629438875565, 6733200.209021949], [2532.754151728976, 6733236.324114282], [2522.916195645805, 6733100.974165964], [2484.5291762413767, 6733095.535350818], [2468.087188553719, 6732926.098428062], [2398.2545859005468, 6732869.246948623], [2409.9546187366777, 6732779.59184108], [2115.422582856479, 6732963.191698], [1704.0604643396416, 6732962.2858051965], [1599.281382944687, 6732959.754645055], [1536.6629504748507, 6732958.082624135], [1318.214154326546, 6732917.98936589], [1278.5548977622855, 6732914.308965703], [1171.9786590303206, 6732904.0581870815], [933.2168036686933, 6732879.092806153], [714.3735134275611, 6733023.113430504], [564.2614582318528, 6732715.480462781], [393.6594143796363, 6732160.599513229], [342.2053998204859, 6732332.73767009], [276.7047392054677, 6732361.886516843], [354.80326826686894, 6732545.12512176], [297.0904051674557, 6732601.550430128], [218.2279940040956, 6732563.528069991], [240.29338413916832, 6732445.013907809], [187.775012893352, 6732422.9508710485], [105.8556816435563, 6732568.517600712], [47.16445155828605, 6732576.939391901], [37.80791968334034, 6732654.748419009], [-66.49937887879948, 6732663.258857554], [-306.0163004718187, 6732686.876907658], [-303.2668498963164, 6732610.092541395], [-511.3397890394054, 6732648.046814295], [-675.1627715004136, 6732777.747700879], [-714.1107998671418, 6732806.340805522], [-683.3934037870592, 6732886.600976604], [-798.6553130573641, 6732847.821621521], [-1059.3923070568478, 6732888.701240868], [-1126.4136490486635, 6732912.431125768], [-1006.0424852246633, 6733071.140654581], [-786.3061081849424, 6733065.204479356], [-461.08410734446795, 6733417.531412052], [-290.85535939137804, 6733538.1156380465], [-262.2715231123073, 6733509.174725696], [-154.85943636300843, 6733671.099995948], [9.767955102059407, 6733662.916395666], [13.950313685247773, 6733623.555324353], [66.08562396902651, 6733705.711803071], [78.11717499695713, 6733735.03293865], [103.0942341264888, 6733803.447206881], [187.36375980620087, 6733823.750412411], [102.19542845347343, 6733994.4237651015], [227.15984195888248, 6734017.732055971], [185.0959899202008, 6734147.393049346], [78.43062363258255, 6734213.032588177], [149.68841092592518, 6734337.523929828], [207.39891443328216, 6734386.227683476], [240.18094805147666, 6734661.27718388], [464.5545963453008, 6735158.405109636], [762.3608652125033, 6735320.363740099], [667.8269728931316, 6735476.883952468], [1280.1588835854047, 6735463.408454401]]]]}}, {\"id\": \"2\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 003\", \"median\": 89.0, \"count\": 7, \"MSOA11CD\": \"E02000897\", \"MSOA11NM\": \"Waltham Forest 003\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8077, \"HHOLDRES\": 7991, \"COMESTRES\": 86, \"POPDEN\": 42.9, \"HHOLDS\": 3345, \"AVHHOLDSZ\": 2.4, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[714.3735128851446, 6733023.113431434], [933.2168041112212, 6732879.09280517], [1171.978659072896, 6732904.058187911], [1278.5548983460824, 6732914.308966918], [1318.214153431134, 6732917.989366507], [1536.662948719875, 6732958.082624273], [1599.2813839845546, 6732959.75464525], [1704.06046332146, 6732962.285806749], [2115.422583178539, 6732963.191697577], [2409.9546195585344, 6732779.591840694], [2309.872152155915, 6732519.046175459], [2255.6626871886187, 6732163.333958871], [2082.366484979681, 6732008.662220686], [1983.4579952739655, 6731935.043882191], [1995.641549628043, 6731852.376572282], [1901.2747379701816, 6731768.48693251], [1840.293020219317, 6731725.335559018], [1774.618088207813, 6731670.761857925], [1818.4356990249503, 6731571.792486021], [1795.2448003755094, 6731419.553294329], [1158.3336258183372, 6731451.714679198], [1939.7124846701943, 6731088.234786534], [2071.2091959834556, 6730931.971531701], [2416.5061159871175, 6730421.163922272], [2560.0766722692847, 6730131.421183241], [2496.123789108212, 6729920.922627558], [2322.9447995286514, 6729506.122264799], [2262.1868234712315, 6729592.766605051], [2074.6792571505343, 6729683.179333171], [1991.814208356949, 6729633.685273506], [1869.4891923519272, 6729800.852217889], [1762.5126695677418, 6729769.931342188], [1757.8006231466084, 6729708.954366075], [1660.8954110758248, 6729663.444920878], [1446.0591238244497, 6729693.005280759], [1418.4524417425155, 6729533.583833015], [1399.2677631170059, 6729691.768116489], [1505.9904344114914, 6730139.216698668], [1357.803309047942, 6730302.354151073], [1091.847100823219, 6730253.869685116], [1055.6613017229743, 6730322.173020784], [988.0416626401815, 6730730.005358684], [833.7144822161516, 6730521.516300303], [777.352367923894, 6730916.031682655], [662.1439494729008, 6730836.227886434], [678.1955343117424, 6730785.155788005], [577.5672434196041, 6730670.789285582], [438.0951289818721, 6730716.339119322], [316.03550177776464, 6730606.64357081], [349.67436380758664, 6731272.087342386], [335.47356728359796, 6731763.081247627], [339.1648974380122, 6731804.552075702], [357.903488539265, 6731985.204069743], [393.65941446987676, 6732160.59951318], [564.2614595359802, 6732715.480463077], [714.3735128851446, 6733023.113431434]]]]}}, {\"id\": \"3\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 004\", \"median\": 43.5, \"count\": 8, \"MSOA11CD\": \"E02000898\", \"MSOA11NM\": \"Waltham Forest 004\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 7750, \"HHOLDRES\": 7677, \"COMESTRES\": 73, \"POPDEN\": 50.6, \"HHOLDS\": 3065, \"AVHHOLDSZ\": 2.5, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-683.3934025669763, 6732886.600977264], [-714.1108005203783, 6732806.340805403], [-675.1627716580577, 6732777.747700027], [-511.3397899420313, 6732648.046815636], [-303.2668500308583, 6732610.092540173], [-306.0163009325363, 6732686.876908945], [-66.49937919116691, 6732663.258857756], [37.807919614564625, 6732654.748418931], [47.16445124105033, 6732576.939391547], [105.85568208210104, 6732568.517599654], [187.77501365112403, 6732422.950870774], [240.29338472385038, 6732445.013907559], [218.2279945610284, 6732563.52806828], [297.09040470872964, 6732601.550431576], [354.80326845682094, 6732545.125123216], [276.70474020032566, 6732361.886517001], [342.2053985588897, 6732332.737668486], [393.65941498082634, 6732160.599513155], [357.9034881955635, 6731985.204070102], [339.1648966983413, 6731804.55207513], [335.47356803836055, 6731763.081246944], [349.67436235944626, 6731272.087343057], [316.03550157108344, 6730606.6435706625], [250.5795675932107, 6730668.928904017], [199.14724293268867, 6730629.168679438], [-112.90608878847954, 6730301.396340389], [-140.51293707312163, 6730244.415135218], [-123.23725572575623, 6730085.310804602], [-76.61009590429433, 6729886.965983056], [-276.5935994046828, 6729809.501964625], [-419.8912864129526, 6729751.284085065], [-377.54746464834784, 6729616.118219485], [-569.7874335038678, 6729544.084589297], [-615.5989462700034, 6729525.400247727], [-713.2682588079819, 6729458.44251991], [-719.3697560195559, 6729574.275318023], [-785.6638078380935, 6729572.512758955], [-777.777073797712, 6729517.718723994], [-835.2085626549114, 6729506.70841613], [-842.472112414154, 6729581.770071754], [-965.1170594490525, 6729570.48907148], [-1251.3250898401795, 6729564.825243544], [-1303.6259360848446, 6729781.004627013], [-1227.3465433942617, 6729806.161713356], [-1109.8347658976993, 6729716.971755285], [-985.9753403439094, 6729727.783493405], [-918.0879753015533, 6729810.108472952], [-998.5394088483936, 6729989.131413621], [-1031.430802794699, 6730030.382389494], [-978.1122626651525, 6730077.840780133], [-831.2197345844381, 6729995.382754299], [-823.2344293413543, 6730229.8486606125], [-756.3574941049163, 6730205.55703658], [-585.2634020756659, 6730397.322052492], [-818.9007585450024, 6730380.955116901], [-890.0172112672288, 6730451.351968876], [-1000.9704284496455, 6730436.797488535], [-1009.7888350254989, 6730562.841537174], [-1134.6931346799506, 6730602.714456151], [-1198.6222334753595, 6730728.203222971], [-1274.4216430756103, 6730733.548076451], [-1290.6597048314952, 6730858.059086144], [-1167.5192932986695, 6730885.645445359], [-1200.8359631770052, 6730949.24443399], [-1154.2579198646552, 6730968.96733563], [-1198.6041104468206, 6731030.959056744], [-1278.1314370489513, 6731013.773044864], [-1277.4686808083513, 6731090.321548587], [-1003.9837707439453, 6731206.360132489], [-1015.0078062155562, 6731247.619607535], [-960.2392913064859, 6731280.206333996], [-946.6796396294674, 6731496.023172794], [-1103.2617772940703, 6731645.902216716], [-1193.5614426351149, 6732118.130919359], [-1161.115514371477, 6732120.949200054], [-1188.0338526615014, 6732192.434761009], [-1137.8699916865312, 6732213.517303459], [-1193.9974491042317, 6732196.479080444], [-1246.270402753965, 6732278.266773036], [-1120.2288489089226, 6732344.766557762], [-1166.3888163235001, 6732382.770725761], [-1154.772458927947, 6732501.968162959], [-1278.2132011273422, 6732501.485121294], [-1369.6825498643484, 6732589.056826774], [-1065.4924027499378, 6732773.145537596], [-1059.3923062172885, 6732888.701240864], [-798.6553129184407, 6732847.821620424], [-683.3934025669763, 6732886.600977264]]]]}}, {\"id\": \"4\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 005\", \"median\": 50.0, \"count\": 12, \"MSOA11CD\": \"E02000899\", \"MSOA11NM\": \"Waltham Forest 005\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 7920, \"HHOLDRES\": 7866, \"COMESTRES\": 54, \"POPDEN\": 65.8, \"HHOLDS\": 3090, \"AVHHOLDSZ\": 2.5, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-2262.057634375536, 6732395.501877812], [-1977.0503252992596, 6732356.789721414], [-1957.1274200546527, 6732503.717146904], [-2074.779761574195, 6732524.554742787], [-2074.932265959519, 6732636.650654321], [-1999.105953174275, 6732655.464624028], [-1944.7257658200076, 6732766.507780515], [-2001.9798369879725, 6732783.879551164], [-2041.79005782915, 6732728.814443108], [-1966.92347806782, 6732860.358875568], [-1912.4338789968392, 6732860.284190392], [-1903.4600121881754, 6732818.385043981], [-1618.7650938469335, 6732737.931742767], [-1527.2911445529448, 6732665.554279743], [-1533.0703703048982, 6732592.721946252], [-1611.1738469445988, 6732650.252479661], [-1706.3180805477296, 6732597.469958758], [-1739.2310160077336, 6732506.825087362], [-1753.0563814571092, 6732241.527439819], [-1675.7622989859606, 6732237.9854878485], [-1673.5402598976643, 6732124.948450526], [-1193.5614430339608, 6732118.130919601], [-1103.2617776361785, 6731645.90221726], [-946.6796401355929, 6731496.023171447], [-960.2392922659823, 6731280.206333647], [-1015.0078059234144, 6731247.619607853], [-1003.9837701127932, 6731206.360133648], [-1277.4686803154145, 6731090.321549241], [-1278.1314363914219, 6731013.773044783], [-1198.6041108640334, 6731030.959056604], [-1154.2579211151426, 6730968.96733587], [-1200.8359637265028, 6730949.244434604], [-1167.5192927173953, 6730885.645445379], [-1290.659705898404, 6730858.059086949], [-1274.4216427477086, 6730733.548075664], [-1198.622234228396, 6730728.203223129], [-1134.6931349903707, 6730602.714456274], [-1009.7888362202224, 6730562.84153816], [-1000.970427159282, 6730436.797489539], [-890.0172121536124, 6730451.351969772], [-818.9007581017221, 6730380.955117635], [-585.2634009672881, 6730397.322051333], [-756.3574932423433, 6730205.557036439], [-823.2344299109889, 6730229.84866061], [-831.2197346983562, 6729995.382754269], [-978.112263695195, 6730077.840780063], [-1031.4308037122396, 6730030.382388559], [-1353.5238149348027, 6729991.444164904], [-1372.5198949616304, 6730049.790667678], [-1492.5059337005437, 6730040.313092637], [-1484.8340220596797, 6730111.057484218], [-1320.3236087988273, 6730135.837419932], [-1324.335245761358, 6730189.357241314], [-1450.099740154096, 6730175.007685223], [-1427.7585739282613, 6730256.666126024], [-1512.5119101402775, 6730242.509482715], [-1503.7809984939083, 6730165.982103004], [-1772.6466165300797, 6730143.072644978], [-1747.9010102860832, 6730038.279568684], [-1789.3291856134513, 6730007.004484324], [-1751.0011864804608, 6729826.459997236], [-1810.7729924407051, 6729802.209275811], [-1822.4459264209106, 6730137.476455255], [-1812.625233345276, 6730403.537321947], [-1780.698858688115, 6730494.250474344], [-1761.0492158621328, 6730630.579683302], [-1823.3221460964326, 6730692.342433164], [-2040.0126340268705, 6730697.360456075], [-2102.276512507166, 6730688.732973249], [-2103.6084256949493, 6730632.347066625], [-2100.682200885433, 6730583.507324132], [-2029.0262560115104, 6730560.565690755], [-2028.336259733448, 6730475.566165874], [-2154.9828773027675, 6730467.839364536], [-2340.1779938616087, 6730486.545479894], [-2531.279541132842, 6730532.572650565], [-2645.2796057033347, 6730725.106502078], [-2625.5012579567497, 6730790.905364573], [-2578.8356271859557, 6730957.538217349], [-2684.6472060568203, 6731040.133954053], [-2677.520759507664, 6731093.095715238], [-2465.1286982140546, 6731065.117256755], [-2446.943102618397, 6731144.9845685065], [-2330.1044695330006, 6731133.128123273], [-2316.2171015704935, 6731210.165082053], [-2250.639164352012, 6731270.345270028], [-2153.2509616681978, 6731245.810493819], [-2070.318974837077, 6731294.853289999], [-2282.001510486433, 6731532.805348881], [-2270.3487198292305, 6731641.974096744], [-2669.918020558094, 6731343.520926644], [-2689.9218323534533, 6731265.224219836], [-2746.372213822808, 6731329.53876769], [-2591.4172078571182, 6731516.89165286], [-2486.9950870088546, 6731761.440670082], [-2445.1255641172284, 6731755.645738811], [-2503.8955356405013, 6731822.803918317], [-2471.466963293485, 6731868.227440967], [-2713.1737748340934, 6731933.3367520785], [-2702.1740373850957, 6731950.094379681], [-2642.996928162765, 6732068.0687177135], [-2391.550175987939, 6732657.286037686], [-2251.306386564905, 6732937.699365273], [-2131.262875512863, 6732876.3300865], [-2261.82528439734, 6732573.230493859], [-2221.419690250045, 6732511.527231946], [-2262.057634375536, 6732395.501877812]]]]}}, {\"id\": \"5\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 006\", \"median\": 80.0, \"count\": 11, \"MSOA11CD\": \"E02000900\", \"MSOA11NM\": \"Waltham Forest 006\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8088, \"HHOLDRES\": 8062, \"COMESTRES\": 26, \"POPDEN\": 52.1, \"HHOLDS\": 2986, \"AVHHOLDSZ\": 2.7, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-2503.8955352046564, 6731822.803917559], [-2445.125563601145, 6731755.645738917], [-2486.9950869935415, 6731761.440670572], [-2591.4172084141396, 6731516.891653805], [-2746.3722126433977, 6731329.538768076], [-2689.9218319481897, 6731265.224219965], [-2669.918019635066, 6731343.520927586], [-2270.3487200470204, 6731641.974096089], [-2282.0015108288067, 6731532.805348994], [-2070.3189741211277, 6731294.853288872], [-2153.2509618500503, 6731245.810494432], [-2250.639165015472, 6731270.345270109], [-2316.2171008037817, 6731210.165082578], [-2330.1044700090315, 6731133.128123122], [-2446.943101630974, 6731144.984569124], [-2465.128698348419, 6731065.117255885], [-2677.520758267754, 6731093.095715589], [-2684.6472060438086, 6731040.133953438], [-2578.8356272918636, 6730957.538216908], [-2625.5012585717923, 6730790.905365424], [-2645.2796060328737, 6730725.106500401], [-2531.2795408580046, 6730532.57265126], [-2340.177993618725, 6730486.545479031], [-2154.9828767392846, 6730467.839363488], [-2028.336259676312, 6730475.566165158], [-2029.0262560837384, 6730560.565691457], [-2100.6822018852035, 6730583.507323642], [-2103.608425365897, 6730632.347065626], [-2102.276511204145, 6730688.732974365], [-2040.0126332589637, 6730697.360455994], [-1823.3221447021533, 6730692.342433499], [-1761.0492161198426, 6730630.57968247], [-1780.698858230938, 6730494.25047467], [-1812.6252331854191, 6730403.537322523], [-1822.4459268572868, 6730137.47645506], [-1810.7729914172128, 6729802.209274945], [-1726.3195247109563, 6729542.521167168], [-1710.8545358099384, 6729448.03301719], [-1669.4432056446753, 6728513.096310928], [-1632.4920141694918, 6728195.961782392], [-1629.0769097176403, 6728182.452096806], [-2290.9543551519537, 6728748.6803886555], [-2456.5919115347833, 6728890.866194847], [-2746.6448662485623, 6729124.018709182], [-3103.9626986928342, 6729411.435285214], [-3247.3384996034283, 6729358.908268127], [-3606.9913274114524, 6729483.846270733], [-3626.9892780403015, 6729517.533280107], [-3483.9026504209137, 6729632.887299048], [-3524.721494226452, 6729763.109203638], [-3606.7687411077745, 6729731.671859566], [-3624.763387180337, 6729876.382656424], [-3776.7734840226894, 6730171.086658525], [-3766.091268229491, 6730325.670243775], [-3764.4591002771926, 6730332.260504786], [-3411.238558105129, 6731035.81759416], [-3169.1025298062305, 6731320.697206474], [-3137.0938356961697, 6731362.205650269], [-2713.173773979177, 6731933.336752306], [-2471.4669627298695, 6731868.227440684], [-2503.8955352046564, 6731822.803917559]]]]}}, {\"id\": \"6\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 007\", \"median\": 56.5, \"count\": 32, \"MSOA11CD\": \"E02000901\", \"MSOA11NM\": \"Waltham Forest 007\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9371, \"HHOLDRES\": 9302, \"COMESTRES\": 69, \"POPDEN\": 54.5, \"HHOLDS\": 3553, \"AVHHOLDSZ\": 2.6, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[777.3523674224597, 6730916.031682256], [833.7144821985815, 6730521.516299593], [988.0416614221343, 6730730.005358388], [1055.6613020533543, 6730322.173021308], [1091.8471021943517, 6730253.869685762], [1357.8033086113446, 6730302.354149814], [1505.990433805079, 6730139.2166981], [1399.2677631461713, 6729691.768117353], [1418.4524421900444, 6729533.583831692], [1446.0591235273953, 6729693.005279938], [1660.8954118622314, 6729663.444921377], [1757.8006232947814, 6729708.954364926], [1762.5126690863117, 6729769.9313422125], [1869.4891923359503, 6729800.852217634], [1991.8142082302406, 6729633.685272935], [2074.6792561104453, 6729683.179333271], [2262.1868245783257, 6729592.7666048175], [2322.944799330954, 6729506.1222648425], [2346.371437099092, 6729400.840163021], [2306.0132706748996, 6729424.150741943], [2242.421746552373, 6729264.575719115], [2215.3299767197814, 6729200.450893712], [2118.073403227993, 6728982.327091633], [1902.0429928632113, 6728509.385337434], [1700.5464675988974, 6728645.025507339], [1627.5810719033475, 6728869.66864255], [1538.125918382587, 6728794.687082765], [1320.6230532999755, 6728810.806873487], [1338.3992556076487, 6728735.48573573], [1253.6420713481202, 6728661.705665615], [1191.7659222886996, 6728740.2397821555], [1140.8533379493867, 6728671.864411958], [1050.4720903100927, 6728688.963730598], [943.2712331199547, 6728558.248699359], [575.8179405553258, 6728354.298948567], [619.7985728860467, 6728352.104102053], [693.2954584387891, 6727990.506831164], [451.86532544690584, 6727979.459027416], [395.6974487264872, 6727885.577274054], [234.6956333160048, 6727995.394073052], [158.0246804278823, 6727973.463306062], [-15.808529578806803, 6728057.332291071], [-103.59010776702029, 6728080.693401383], [-95.78765445191591, 6727732.559978682], [-182.68140441569503, 6727715.38281781], [-212.76865574269942, 6727586.681509885], [-179.5588622017047, 6728162.60228255], [-48.68726312880081, 6728685.72054844], [-19.883631814805046, 6728795.195115587], [-99.1492874436684, 6728806.341543715], [-124.39506939105817, 6728975.446885013], [-206.0985581784962, 6728951.512135937], [-279.78033857279297, 6729001.526339298], [-362.9785834105746, 6729036.654753969], [-369.65489210469167, 6729152.025337993], [-381.7645307254037, 6729209.687957716], [-253.55546653324262, 6729561.343458923], [-482.5701066267411, 6729501.743369544], [-505.26296359307344, 6729565.006604415], [-569.7874341368787, 6729544.0845894], [-377.5474651839487, 6729616.118219447], [-419.89128672709035, 6729751.284084544], [-276.5935984901074, 6729809.501965444], [-76.6100960052893, 6729886.96598232], [-123.23725614912075, 6730085.310804824], [-140.51293741093696, 6730244.415136743], [-112.90608864818415, 6730301.396341799], [199.147242126632, 6730629.168679882], [250.57956728951768, 6730668.928904033], [316.0355002868718, 6730606.643570239], [438.0951280605254, 6730716.339120353], [577.5672436349597, 6730670.78928708], [678.1955338055284, 6730785.155786585], [662.1439495516786, 6730836.227887357], [777.3523674224597, 6730916.031682256]]]]}}, {\"id\": \"7\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 008\", \"median\": 48.0, \"count\": 28, \"MSOA11CD\": \"E02000902\", \"MSOA11NM\": \"Waltham Forest 008\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8231, \"HHOLDRES\": 8229, \"COMESTRES\": 2, \"POPDEN\": 67.7, \"HHOLDS\": 3101, \"AVHHOLDSZ\": 2.7, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-1427.75857428971, 6730256.666126514], [-1450.099739013676, 6730175.007684961], [-1324.3352458519082, 6730189.357240909], [-1320.3236088143174, 6730135.837420484], [-1484.8340219655447, 6730111.057484713], [-1492.505933912049, 6730040.313093499], [-1372.5198949452995, 6730049.790667583], [-1353.5238150260168, 6729991.444165198], [-1031.4308030887883, 6730030.38238899], [-998.5394101228686, 6729989.131412276], [-918.0879753016861, 6729810.108473329], [-985.9753403036352, 6729727.783493101], [-1109.8347651616575, 6729716.971755457], [-1227.3465425282366, 6729806.161714172], [-1303.6259353821285, 6729781.004627399], [-1251.32509087571, 6729564.825243901], [-965.1170595369031, 6729570.489070994], [-842.4721127472338, 6729581.770071049], [-835.2085629756434, 6729506.7084164275], [-777.7770748869706, 6729517.718723799], [-785.663807318381, 6729572.512758003], [-719.3697550493491, 6729574.275318669], [-713.2682587748332, 6729458.442520431], [-615.5989472158243, 6729525.400247294], [-569.7874338016745, 6729544.084588693], [-505.2629649127794, 6729565.006603365], [-482.57010673207327, 6729501.74336924], [-253.55546614891296, 6729561.343458411], [-381.76452978905377, 6729209.6879575625], [-369.6548916534451, 6729152.025337078], [-362.9785833575987, 6729036.654753945], [-279.78033843563986, 6729001.526338793], [-206.098557904367, 6728951.5121349925], [-124.3950692004866, 6728975.446884656], [-99.14928655170847, 6728806.341544445], [-19.883632734647023, 6728795.195116166], [-48.687262853874984, 6728685.720548173], [-179.5588617476699, 6728162.602281493], [-212.7686564067347, 6727586.681510552], [-193.3258287292239, 6727415.204844835], [-241.40840685217137, 6727422.363423618], [-375.77542630380185, 6727413.514261078], [-489.32796237606874, 6727398.95513929], [-509.7653972655451, 6727457.871143684], [-548.4921038437336, 6727781.861792898], [-564.4630362661842, 6727902.201022706], [-498.66087249406263, 6727950.560946351], [-541.4502163407394, 6728053.170659619], [-642.4927838006848, 6728058.164779319], [-653.3841205147156, 6728132.659840322], [-767.6289390449131, 6728127.572394622], [-862.4236848134352, 6728101.585162533], [-771.2680948644995, 6727679.263436771], [-911.2898431131284, 6727662.465719365], [-1126.1075590847192, 6727505.394283398], [-1220.2873145470423, 6728043.547302669], [-1289.833272473212, 6728045.892810506], [-1188.7804132330136, 6727572.856535948], [-1387.263867944989, 6727567.351626096], [-1460.3514340684462, 6727608.132579956], [-1537.6103019515922, 6727546.117144764], [-1535.8354274597946, 6727594.337105749], [-1555.297196813652, 6727723.885678125], [-1601.9203381620473, 6727716.077031328], [-1657.5118653306229, 6727945.258382161], [-1752.8876835913431, 6728086.103296095], [-2002.1875364754144, 6728021.329338902], [-2029.5071427556356, 6728108.763355298], [-1629.0769097796888, 6728182.452097509], [-1632.4920137029765, 6728195.961782813], [-1669.4432052227269, 6728513.096311244], [-1710.8545354079943, 6729448.033016854], [-1726.3195260841692, 6729542.521167195], [-1810.772991752417, 6729802.209275326], [-1751.001186290022, 6729826.459996335], [-1789.3291854155773, 6730007.00448458], [-1747.901010507502, 6730038.27956862], [-1772.646616507066, 6730143.07264612], [-1503.780999205299, 6730165.982103831], [-1512.5119110078517, 6730242.509482606], [-1427.75857428971, 6730256.666126514]]]]}}, {\"id\": \"8\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 009\", \"median\": 64.0, \"count\": 47, \"MSOA11CD\": \"E02000903\", \"MSOA11NM\": \"Waltham Forest 009\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9043, \"HHOLDRES\": 9043, \"COMESTRES\": 0, \"POPDEN\": 46.0, \"HHOLDS\": 3179, \"AVHHOLDSZ\": 2.8, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-3606.991327221545, 6729483.846270178], [-3247.338498588433, 6729358.908267637], [-3103.9626977140856, 6729411.435284899], [-2746.6448675861484, 6729124.0187086], [-2456.5919125315, 6728890.866195045], [-2290.9543555199966, 6728748.680388802], [-1629.0769094012012, 6728182.452096259], [-2029.5071423390868, 6728108.763354083], [-2081.9220482387805, 6728102.106723369], [-2656.1172307755683, 6727956.63085459], [-2660.0635788664954, 6727905.617880365], [-2553.0377349401792, 6727515.304378969], [-2445.0949022511063, 6727361.628192895], [-2510.7083157594043, 6727348.840732484], [-2837.9538486593583, 6727294.096881706], [-2841.1073656786157, 6727276.808977017], [-2834.270647812391, 6727203.085740957], [-2990.4334200273775, 6727153.074007848], [-2971.836115213503, 6727109.773099479], [-2948.567627431497, 6726991.638150078], [-3013.098643571071, 6726882.316403172], [-3190.2747950252137, 6726733.620871682], [-3323.3133002145228, 6726658.24216696], [-3453.431900423713, 6726823.404074588], [-3523.254062547997, 6726795.708379147], [-3526.3380742510285, 6726739.178878364], [-3619.887789137954, 6726894.338839488], [-3661.357758980566, 6726876.931647536], [-3680.6219094563185, 6726938.740284311], [-3756.025604932151, 6726953.97633134], [-3782.2118506607762, 6727103.145534206], [-3865.792111848012, 6727086.3357727835], [-3964.1122754572752, 6727097.757667454], [-4005.3372785550728, 6727250.7054675305], [-4055.1653757189993, 6727428.131667623], [-4076.090726423579, 6727497.276170993], [-4122.762440170437, 6727495.071240882], [-4358.426262912927, 6727415.847793661], [-4344.289273616848, 6727241.266338577], [-4389.709783185299, 6727231.6966864625], [-4398.411637166633, 6727327.0163579], [-4791.967304353731, 6727271.034198816], [-4725.694941673882, 6727549.516832426], [-4542.550062841019, 6727827.933572429], [-4610.356463819132, 6727862.477122925], [-4954.626564583052, 6728054.650897952], [-4982.084542507518, 6728010.610935491], [-4433.955376444145, 6729040.458579626], [-4292.931915995736, 6729163.148747431], [-3825.0867605913795, 6729448.809091366], [-3699.9517151233954, 6729554.816403953], [-3606.768741190757, 6729731.671860018], [-3524.721494769311, 6729763.109202607], [-3483.9026504809267, 6729632.887299819], [-3626.989278368026, 6729517.533281063], [-3606.991327221545, 6729483.846270178]]]]}}, {\"id\": \"9\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 010\", \"median\": 60.0, \"count\": 35, \"MSOA11CD\": \"E02000904\", \"MSOA11NM\": \"Waltham Forest 010\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8228, \"HHOLDRES\": 8213, \"COMESTRES\": 15, \"POPDEN\": 56.4, \"HHOLDS\": 2900, \"AVHHOLDSZ\": 2.8, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[1627.5810725342783, 6728869.668641675], [1700.5464666587857, 6728645.025507743], [1902.042992435908, 6728509.385336998], [1840.8215329397528, 6728371.595227139], [1723.5810246776837, 6728131.913352079], [1612.6389559842237, 6727865.199746807], [1608.4698271385478, 6727799.804107753], [1569.8254663123573, 6727258.212157105], [1565.1007059883368, 6727212.522609948], [1563.0060492310977, 6727192.2241393775], [1342.784863712714, 6727097.077394053], [1299.172195544034, 6726975.297804535], [749.9022302082949, 6726821.930723275], [742.4573111228481, 6726819.599097723], [361.1873024557937, 6726729.8480298575], [142.39881171236925, 6726690.1224295], [91.7397434429376, 6726679.33962824], [39.269596205789504, 6726670.509414112], [-132.60074406032635, 6726628.072645036], [-290.3812437103017, 6726569.294283533], [-366.22315467306134, 6726543.857395412], [-429.3631670541899, 6726522.271605213], [-592.3742057733648, 6726470.763751148], [-637.8735942597702, 6726455.945445265], [-723.6310211707925, 6726411.695536295], [-775.7503544460417, 6726382.572236923], [-976.6590315932518, 6726295.459140506], [-1136.5775611530332, 6726255.793214382], [-1207.5487835501408, 6726560.814300316], [-809.0759654957086, 6726852.105276399], [-746.0519719985416, 6726814.712392814], [-760.7685623502991, 6726933.21389329], [-854.8481473977272, 6727116.409733659], [-788.0143113412427, 6727243.659798061], [-867.5976453736344, 6727343.525771133], [-1056.6818137894218, 6727401.807786602], [-1126.0853532112587, 6727486.145501672], [-1126.107558908133, 6727505.394283905], [-911.2898431773456, 6727662.465718662], [-771.2680945619571, 6727679.263437516], [-862.4236848009547, 6728101.585161188], [-767.6289376585115, 6728127.572394319], [-653.3841202215558, 6728132.659840578], [-642.4927839009716, 6728058.164779371], [-541.4502158879438, 6728053.170659658], [-498.6608720941102, 6727950.560946425], [-564.4630360896864, 6727902.201023663], [-548.4921034393997, 6727781.861792839], [-509.76539667006426, 6727457.87114238], [-489.3279626053211, 6727398.955138857], [-375.77542617970465, 6727413.514261271], [-241.40840697144455, 6727422.363423514], [-193.32582900215814, 6727415.204843396], [-212.768656351723, 6727586.68151059], [-182.68140463786625, 6727715.38281782], [-95.78765362319955, 6727732.559978377], [-103.59010794033155, 6728080.693402246], [-15.808529054491565, 6728057.3322916245], [158.02467939301582, 6727973.463307227], [234.69563209543503, 6727995.394073379], [395.6974484074369, 6727885.577272926], [451.865324907853, 6727979.459027586], [693.2954587689036, 6727990.506830726], [619.798571899996, 6728352.104102158], [575.8179420112996, 6728354.2989479685], [943.2712340302371, 6728558.248699437], [1050.4720910188275, 6728688.963729633], [1140.8533369628049, 6728671.864411878], [1191.765922577168, 6728740.23978162], [1253.6420718438897, 6728661.705666166], [1338.3992560712431, 6728735.48573543], [1320.6230532204452, 6728810.806874838], [1538.125917676419, 6728794.687081935], [1627.5810725342783, 6728869.668641675]]]]}}, {\"id\": \"10\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 011\", \"median\": 117.5, \"count\": 58, \"MSOA11CD\": \"E02000905\", \"MSOA11NM\": \"Waltham Forest 011\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9589, \"HHOLDRES\": 9512, \"COMESTRES\": 77, \"POPDEN\": 91.4, \"HHOLDS\": 3465, \"AVHHOLDSZ\": 2.7, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-2029.5071425627627, 6728108.763354839], [-2002.1875374018064, 6728021.32933767], [-1752.8876839972704, 6728086.103295833], [-1657.5118651435919, 6727945.258381662], [-1601.9203377245647, 6727716.07703093], [-1555.2971960622972, 6727723.885677676], [-1535.8354275229938, 6727594.337105718], [-1537.610303186413, 6727546.11714463], [-1460.3514333779008, 6727608.132580139], [-1387.2638676965732, 6727567.351625908], [-1188.7804131565372, 6727572.8565359535], [-1289.8332722855614, 6728045.892809676], [-1220.2873149813827, 6728043.547302859], [-1126.1075592164289, 6727505.394284157], [-1126.085353500878, 6727486.145501846], [-1056.6818136602349, 6727401.8077859925], [-867.5976444817186, 6727343.5257719625], [-788.0143122294407, 6727243.659797601], [-854.8481466918246, 6727116.409733004], [-760.7685636423, 6726933.213894399], [-746.0519717541976, 6726814.712392192], [-809.0759657011948, 6726852.105276136], [-1207.548784172884, 6726560.814300018], [-1136.5775617409904, 6726255.793214238], [-1509.9657546193612, 6726217.7540663015], [-1525.176227418474, 6726217.063072605], [-1751.5797389600557, 6726274.711885194], [-1755.8771135560812, 6726268.7924405085], [-1968.444722759269, 6726093.007974555], [-2055.7989232007453, 6726024.599414521], [-2085.4349987824444, 6725975.8873459045], [-2138.3172284557245, 6725818.003326064], [-2112.2786971025585, 6725685.212287643], [-2156.0729489067708, 6725681.602073105], [-2457.2818762451475, 6725604.6864971155], [-2479.1303174740096, 6725599.106340121], [-2719.6855192054236, 6725542.576988064], [-2734.982476972049, 6725598.008919146], [-3009.2641454247364, 6725480.716395273], [-3070.118480153025, 6725454.691065948], [-3078.182051218497, 6725499.090216032], [-3134.610501897595, 6725768.960898622], [-2878.5550755798786, 6725796.025630305], [-2831.2655661664385, 6725847.571060882], [-2852.0683169149247, 6725879.505750067], [-2739.2906193782783, 6725939.549791895], [-2649.7809679068823, 6725976.507326479], [-2573.838220204799, 6725926.61185971], [-2431.6169092269224, 6725989.517799228], [-2478.2227994505333, 6726204.676886454], [-2370.5855311880046, 6726240.3286242755], [-2278.1270412183007, 6725902.65645638], [-2229.976286210493, 6725888.119690488], [-2207.161450629594, 6725952.626303558], [-2263.7602372967103, 6725978.517608547], [-2324.736865519433, 6726329.541671045], [-2235.0490710193685, 6726364.475695501], [-2191.524678587264, 6726379.317736006], [-2138.351256930955, 6726508.042136532], [-2157.86623245698, 6726643.247558051], [-2171.1932417258054, 6726733.681714654], [-2181.680284732179, 6726800.387216495], [-2290.838959196007, 6726735.018429135], [-2346.6321536358896, 6727029.744510398], [-2445.094901862218, 6727361.628192509], [-2553.0377347920503, 6727515.304379232], [-2660.0635794077166, 6727905.617881623], [-2656.1172313386087, 6727956.630855522], [-2081.922048738267, 6728102.106724456], [-2029.5071425627627, 6728108.763354839]]]]}}, {\"id\": \"11\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 012\", \"median\": 100.0, \"count\": 71, \"MSOA11CD\": \"E02000906\", \"MSOA11NM\": \"Waltham Forest 012\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9248, \"HHOLDRES\": 9246, \"COMESTRES\": 2, \"POPDEN\": 149.6, \"HHOLDS\": 3507, \"AVHHOLDSZ\": 2.6, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-2346.6321538625307, 6727029.744510577], [-2290.8389589128938, 6726735.018428557], [-2181.680284257344, 6726800.387216155], [-2171.193241319657, 6726733.681715724], [-2157.8662333686343, 6726643.247557996], [-2138.351256801237, 6726508.042137055], [-2191.5246782571053, 6726379.317735815], [-2235.0490714333946, 6726364.4756957805], [-2324.7368657322663, 6726329.541671798], [-2263.760236764606, 6725978.517608468], [-2207.161450657255, 6725952.62630307], [-2229.9762866417796, 6725888.119690766], [-2278.127040160863, 6725902.656456363], [-2370.58553171201, 6726240.328623733], [-2478.2227991135146, 6726204.676885962], [-2431.6169096321855, 6725989.517799518], [-2573.8382196830066, 6725926.611859133], [-2649.7809682972306, 6725976.50732735], [-2739.2906196339522, 6725939.549792154], [-2852.0683175276217, 6725879.505750491], [-2831.2655658099466, 6725847.571060448], [-2878.5550751498754, 6725796.02563078], [-3134.610501277153, 6725768.960898483], [-3078.1820501924817, 6725499.090215956], [-3098.394957837579, 6725497.943563398], [-3176.3092307710162, 6725613.955755523], [-3488.228266210205, 6725475.242090037], [-3562.6852149629967, 6725503.072881664], [-3682.388084656721, 6725388.616577632], [-3755.3173726263, 6725512.314669221], [-3829.3890776050475, 6725583.795323496], [-3882.9104014069185, 6725813.30956811], [-3525.190511763303, 6725901.8579605725], [-3542.222956055002, 6725932.15686671], [-3560.1355710585785, 6725979.777615618], [-3517.1784690249046, 6725998.200859072], [-3594.0235980308967, 6726224.822948309], [-3453.0578299778554, 6726337.355456157], [-3391.5180153650704, 6726385.697790983], [-3428.64886198048, 6726416.6415890595], [-3474.375035438168, 6726463.706466025], [-3432.4192533797436, 6726496.683187499], [-3377.5660149799655, 6726434.104336304], [-3294.373828566513, 6726486.961773397], [-3107.7060588499567, 6726543.483833863], [-3136.125322357449, 6726633.129339819], [-3190.2747951200126, 6726733.620872562], [-3013.098643743895, 6726882.316402327], [-2948.5676278355654, 6726991.638150421], [-2971.836115544105, 6727109.773099577], [-2990.433420532839, 6727153.074009044], [-2834.270648554319, 6727203.085742086], [-2841.1073661318096, 6727276.808978029], [-2837.9538477763385, 6727294.096882443], [-2510.7083160639827, 6727348.840731727], [-2445.0949010678455, 6727361.628192055], [-2346.6321538625307, 6727029.744510577]]]]}}, {\"id\": \"12\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 013\", \"median\": 95.0, \"count\": 42, \"MSOA11CD\": \"E02000907\", \"MSOA11NM\": \"Waltham Forest 013\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9998, \"HHOLDRES\": 9634, \"COMESTRES\": 364, \"POPDEN\": 111.9, \"HHOLDS\": 3885, \"AVHHOLDSZ\": 2.5, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[990.5077999516736, 6726279.571107394], [832.8613117103348, 6726155.749209159], [520.9938190893591, 6726202.769718152], [535.8133052360379, 6725984.483504872], [607.8869975912642, 6725982.309424485], [635.2983497578555, 6725889.778321082], [94.39884091763149, 6725735.281188754], [29.80265801348466, 6725678.063304832], [-6.372357098021117, 6725649.099840958], [-45.906138682468885, 6725617.010671191], [-116.07371515573449, 6725594.267465685], [-429.1529697421903, 6725445.566563623], [-364.17775165315066, 6725329.547583771], [-613.3071445681016, 6725234.061292691], [-507.6379563986557, 6724929.102781109], [-629.8103137113659, 6724987.676566806], [-696.8525997926166, 6725357.609796548], [-836.8722714773603, 6725241.189228412], [-803.3217390094744, 6725099.0494097425], [-935.5536076325201, 6725049.064585183], [-981.6855849887482, 6724948.365945837], [-952.6299470567029, 6724873.710255665], [-1011.3024285348101, 6724848.755987104], [-936.7424538743786, 6724635.661787257], [-987.3913940630327, 6724611.301260602], [-1029.9452538928801, 6724746.282591627], [-1147.4679632306527, 6724746.137822729], [-1179.601010914504, 6724837.948920332], [-1135.093098073993, 6724796.434839498], [-1110.4010413245953, 6724874.943969502], [-1195.5113866001427, 6724879.404560036], [-1210.235034107224, 6724920.243147971], [-1073.693563619644, 6724985.028626386], [-1103.4999798852723, 6725017.414938431], [-1069.414871529797, 6725084.0529443715], [-1042.43901389127, 6725056.551318841], [-1109.2024889776515, 6725219.373726417], [-1211.0643047090907, 6725143.400456289], [-1165.683588610122, 6725320.797111417], [-1325.9048456935031, 6725293.937064303], [-1359.78398339267, 6725390.970063191], [-1196.1632432204674, 6725431.044168633], [-1232.4331503938542, 6725523.446066348], [-1620.2552985631703, 6725445.396744267], [-1626.5503352633536, 6725510.1157412175], [-1546.7190925408263, 6725519.528090744], [-1398.7814559273395, 6725555.364638323], [-1464.1553689992763, 6725868.140677973], [-1429.8221158115887, 6725876.8166311085], [-1368.7465230361713, 6725889.7102277065], [-1249.7049182056853, 6725935.445794499], [-1297.442326402474, 6725997.151685569], [-1269.8342154326854, 6726056.893125795], [-1193.6261989545053, 6726039.902270439], [-1183.0635796623376, 6726121.24875845], [-1227.3212068167277, 6726155.622238493], [-1336.0055941560972, 6726114.875805649], [-1509.9657543859043, 6726217.754065905], [-1136.5775621218236, 6726255.793214039], [-976.6590324816711, 6726295.459140595], [-775.7503546178924, 6726382.572236692], [-723.6310212720973, 6726411.695535569], [-637.873594644631, 6726455.945444709], [-592.3742065867681, 6726470.763751066], [-429.36316656399697, 6726522.271605211], [-366.22315474121746, 6726543.857395005], [-290.38124390357297, 6726569.294284406], [-132.6007431750935, 6726628.072644497], [39.269596010836466, 6726670.509414781], [91.73974337553386, 6726679.3396279765], [142.39881108767864, 6726690.122429581], [361.1873017779502, 6726729.848029975], [742.4573114580965, 6726819.599097728], [749.9022307800539, 6726821.930723307], [752.6483543041671, 6726784.921907275], [652.4183327924434, 6726561.048648996], [1125.726662224596, 6726395.972338614], [1109.6209240821688, 6726345.78776896], [990.5077999516736, 6726279.571107394]]]]}}, {\"id\": \"13\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 014\", \"median\": 95.5, \"count\": 126, \"MSOA11CD\": \"E02000908\", \"MSOA11NM\": \"Waltham Forest 014\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 10516, \"HHOLDRES\": 10516, \"COMESTRES\": 0, \"POPDEN\": 44.6, \"HHOLDS\": 4348, \"AVHHOLDSZ\": 2.4, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-4725.694941413826, 6727549.516833755], [-4791.967303044603, 6727271.034199159], [-4398.411636985223, 6727327.01635798], [-4389.709783523025, 6727231.69668604], [-4344.2892731057655, 6727241.266337078], [-4358.426261878592, 6727415.847792221], [-4122.762440933962, 6727495.071241987], [-4076.0907260269014, 6727497.276170866], [-4055.165375510238, 6727428.131667485], [-4005.337278249344, 6727250.70546706], [-3964.112276200973, 6727097.757666646], [-3865.7921129574074, 6727086.3357727025], [-3782.211851279979, 6727103.145533739], [-3756.025604841512, 6726953.976330511], [-3680.6219100298476, 6726938.740284297], [-3661.357759635794, 6726876.931648076], [-3619.8877887811964, 6726894.338840296], [-3526.3380744188075, 6726739.1788781], [-3523.2540623933623, 6726795.708379144], [-3453.4319002184484, 6726823.404072899], [-3323.3133010240313, 6726658.242166136], [-3190.2747948650026, 6726733.620873128], [-3136.1253224213565, 6726633.12933892], [-3107.706058585874, 6726543.483834902], [-3294.3738283573534, 6726486.961772915], [-3377.5660161997384, 6726434.104335806], [-3432.4192528143576, 6726496.683187866], [-3474.375036301317, 6726463.706467186], [-3428.6488625443612, 6726416.641589429], [-3391.518016103856, 6726385.697790376], [-3453.0578302205176, 6726337.355455341], [-3594.023598658995, 6726224.822948874], [-3517.1784683063, 6725998.200858585], [-3560.1355708832316, 6725979.777616778], [-3542.2229551823384, 6725932.156866536], [-3525.190511228278, 6725901.8579602465], [-3882.9104025592437, 6725813.309567514], [-3829.3890774555466, 6725583.795323473], [-3755.317371954741, 6725512.314668692], [-3682.3880850383953, 6725388.616576763], [-3733.895004380772, 6725345.558137702], [-3721.048005875209, 6725313.818239271], [-3694.6969043772397, 6725264.235559123], [-3477.1872593103867, 6725352.793016321], [-3441.1240310880935, 6725287.7321246965], [-3657.2176484784504, 6725192.72712878], [-3784.0754801405387, 6725120.567251622], [-3783.037924075645, 6725041.470122043], [-3646.061488090092, 6724921.706659488], [-3695.124930212972, 6724877.500712435], [-3746.4807040781484, 6724904.5805724645], [-3774.893382946909, 6724895.733034322], [-4079.8127161161415, 6724801.131308563], [-4057.9838490655834, 6724698.918579371], [-4040.4731646544237, 6724651.230196971], [-4087.2028005768398, 6724628.49929127], [-4078.3991581725995, 6724587.501492414], [-4228.834544715181, 6724531.381727329], [-4408.048186234915, 6724442.974297456], [-4488.164723168331, 6724391.955000832], [-4585.990785947122, 6724353.458411074], [-4913.94822303353, 6724855.834126441], [-5159.442898180151, 6725033.970724011], [-6365.62133806255, 6724518.330546943], [-6614.933484215783, 6724595.204924849], [-6472.674512510737, 6724717.6488147], [-6334.342934598778, 6724831.022934207], [-6085.868546982983, 6725126.83382592], [-5999.348258324941, 6725260.865273289], [-5996.584177273121, 6725267.278271765], [-5923.664940069707, 6725486.550474483], [-5799.715618033314, 6725628.588499536], [-5737.79026288406, 6725688.836666749], [-5627.117646108517, 6725842.906175835], [-5773.5083808962345, 6726223.124958376], [-5722.9841886072345, 6726525.307196619], [-5639.321213600607, 6726955.078322936], [-5523.5075127509635, 6727131.772434938], [-5484.884809499968, 6727336.989616086], [-5418.847686137029, 6727466.682296141], [-4982.084542691539, 6728010.610935762], [-4954.626565204025, 6728054.650898758], [-4610.356464519281, 6727862.47712307], [-4542.550063622513, 6727827.933572246], [-4725.694941413826, 6727549.516833755]]]]}}, {\"id\": \"14\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 015\", \"median\": 88.5, \"count\": 62, \"MSOA11CD\": \"E02000909\", \"MSOA11NM\": \"Waltham Forest 015\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8640, \"HHOLDRES\": 8635, \"COMESTRES\": 5, \"POPDEN\": 62.1, \"HHOLDS\": 3459, \"AVHHOLDSZ\": 2.5, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[1571.6356522515973, 6726302.562281933], [1607.7948914001468, 6725828.757552431], [1626.6115051704826, 6725591.920748088], [1639.558706605124, 6725451.042587909], [1669.220842349966, 6725125.296636654], [1709.2050679385675, 6725092.315361915], [1835.839854297292, 6725055.531319566], [1300.3932479169264, 6725062.590930771], [942.1715601401683, 6725078.995668246], [841.0477668116663, 6725127.347242727], [637.4622099583827, 6724981.873682275], [475.57024232638196, 6724875.224357677], [267.1981338472248, 6724745.652267173], [222.72374175386872, 6724730.473889764], [-73.25668891992525, 6724530.351683818], [-228.11202919740367, 6724428.217015532], [-251.99255266232103, 6724413.996376], [-485.57869309115694, 6724264.066342615], [-508.6130294018498, 6724287.915047344], [-697.982169611831, 6724252.80010343], [-799.2145037284989, 6724302.036348305], [-792.7171846600867, 6724369.727445238], [-961.058452532135, 6724377.697217207], [-1029.2841881162578, 6724332.07128709], [-1079.9958104330021, 6724525.859048911], [-1139.6032150804517, 6724479.501499119], [-1190.9976671960699, 6724460.651062332], [-1250.3712843169515, 6724487.830487769], [-1223.8134534429864, 6724351.600975135], [-1274.5666524223257, 6724288.891489745], [-1354.774910360705, 6724330.673221449], [-1382.5673335798826, 6724430.16612969], [-1490.6623000425823, 6724430.268532651], [-1460.6543398011172, 6724464.496469515], [-1588.044209353918, 6724413.047172792], [-1561.5548116577756, 6724349.821530852], [-1714.4957967153712, 6724279.877821502], [-1718.7871555272131, 6724231.890822733], [-1809.0209411179444, 6724334.278951273], [-1765.4031112619891, 6724431.9449479785], [-1670.888010283486, 6724478.656660975], [-1605.7389742309292, 6724553.811972603], [-1624.1706737292307, 6724598.646400807], [-1650.0270077628984, 6724696.445541406], [-1473.0038674245527, 6724771.126336224], [-1445.1843229730896, 6724891.674589406], [-1347.4963775639756, 6724861.125838913], [-1211.0643047544986, 6725143.400457117], [-1109.2024898632826, 6725219.373726869], [-1042.4390145529596, 6725056.5513191875], [-1069.4148710811617, 6725084.052943533], [-1103.4999797276723, 6725017.4149379125], [-1073.6935625271103, 6724985.0286261635], [-1210.2350332846152, 6724920.243147583], [-1195.511387501662, 6724879.404561001], [-1110.401041235417, 6724874.943970494], [-1135.0930973163977, 6724796.434838648], [-1179.6010117384849, 6724837.948921486], [-1147.4679630530043, 6724746.137822948], [-1029.9452539169117, 6724746.282591194], [-987.3913940514374, 6724611.30125957], [-936.742454120316, 6724635.66178696], [-1011.3024289863665, 6724848.755986239], [-952.6299465659789, 6724873.710256331], [-981.6855853216509, 6724948.365946949], [-935.5536087326218, 6725049.064584981], [-803.3217388285067, 6725099.049409084], [-836.8722714387237, 6725241.189228284], [-696.8525996151452, 6725357.609796291], [-629.8103139515056, 6724987.676567295], [-507.637956601398, 6724929.102780741], [-613.3071436069234, 6725234.061292873], [-364.17775139384764, 6725329.5475836955], [-429.15296899278286, 6725445.566563738], [-116.07371570713515, 6725594.267467097], [-45.906138158197905, 6725617.010670866], [-6.372355859571442, 6725649.099841736], [29.802657929927037, 6725678.063304383], [94.39884080105799, 6725735.2811895665], [635.2983487273262, 6725889.778322032], [607.8869982126355, 6725982.309424758], [535.8133062784281, 6725984.483504563], [520.9938189120205, 6726202.769717735], [832.861311344726, 6726155.749209194], [990.5077999561436, 6726279.5711065885], [1109.6209251967869, 6726345.787768575], [1125.726661659343, 6726395.972338919], [652.4183338217777, 6726561.048648723], [752.6483544868166, 6726784.921906723], [749.902230264413, 6726821.9307243], [1299.1721959625302, 6726975.297804399], [1342.784863547015, 6727097.077393813], [1563.0060489946757, 6727192.224138981], [1543.2137528563294, 6727013.263088488], [1538.5902627630076, 6726975.225454382], [1513.8764441795242, 6726654.740803216], [1571.6356522515973, 6726302.562281933]]]]}}, {\"id\": \"15\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 016\", \"median\": 85.0, \"count\": 99, \"MSOA11CD\": \"E02000910\", \"MSOA11NM\": \"Waltham Forest 016\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 10698, \"HHOLDRES\": 10647, \"COMESTRES\": 51, \"POPDEN\": 135.3, \"HHOLDS\": 4005, \"AVHHOLDSZ\": 2.7, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-1751.5797382438413, 6726274.711884876], [-1525.1762273306676, 6726217.063071974], [-1509.9657541027466, 6726217.754066461], [-1336.0055940593952, 6726114.87580514], [-1227.3212075470603, 6726155.622239675], [-1183.063579607016, 6726121.248758841], [-1193.6261986169113, 6726039.902269809], [-1269.8342146677435, 6726056.893126095], [-1297.4423261519782, 6725997.151684705], [-1249.7049182027201, 6725935.445793544], [-1368.7465229186685, 6725889.710226756], [-1429.8221147434408, 6725876.816630774], [-1464.1553688064032, 6725868.140677717], [-1398.7814559517253, 6725555.3646381805], [-1546.7190925876062, 6725519.528090306], [-1626.5503356918077, 6725510.115740818], [-1620.2552983628177, 6725445.396744191], [-1232.433150181287, 6725523.446066051], [-1196.16324394186, 6725431.044169441], [-1359.7839831567348, 6725390.970064248], [-1325.9048449611348, 6725293.937063751], [-1165.6835883458177, 6725320.797111632], [-1211.064304913559, 6725143.400457342], [-1347.496377747289, 6724861.125839808], [-1445.1843238103918, 6724891.674589028], [-1473.0038669244461, 6724771.12633546], [-1650.027008547446, 6724696.44554001], [-1624.1706748137096, 6724598.646401088], [-1605.738974354097, 6724553.811972776], [-1670.8880095696172, 6724478.656660559], [-1765.4031114875681, 6724431.944948751], [-1809.020941024606, 6724334.27895032], [-1718.7871557384528, 6724231.890821737], [-1714.4957966728398, 6724279.87782033], [-1561.554810545105, 6724349.821531268], [-1588.0442109461155, 6724413.047172732], [-1460.6543395603137, 6724464.496469813], [-1490.6623004958205, 6724430.26853311], [-1382.5673341586341, 6724430.166129851], [-1354.7749106901558, 6724330.673221606], [-1274.566653690295, 6724288.8914905405], [-1270.9342167421962, 6724282.291881002], [-1223.5149057773647, 6724282.430672934], [-1172.5173245480826, 6724231.414687654], [-1157.7315020068688, 6724115.733317479], [-1205.786403133647, 6724107.3558646105], [-1230.3055134932558, 6724174.132543108], [-1617.7910200538186, 6723967.941598211], [-1539.2286390450881, 6723944.7836040985], [-1551.246017578427, 6723868.760930664], [-1488.4280530997803, 6723832.916793372], [-1538.061512442707, 6723812.1651264895], [-1714.5411823456484, 6723721.875229255], [-1725.6276341010607, 6723715.651104044], [-1783.0698164382927, 6723683.397764739], [-2014.9950797348315, 6723558.5416075215], [-2214.727943092835, 6723453.245399093], [-2309.974007003193, 6723402.113646726], [-2378.279070146687, 6723535.15230679], [-2305.679800147361, 6723599.09820316], [-2343.3896298473296, 6723662.246388194], [-2249.038503877839, 6723714.643283952], [-2321.2078151596174, 6723829.181110296], [-2325.301668308137, 6723836.032432146], [-2225.862177222876, 6723883.520419371], [-2227.829509737451, 6723888.493708132], [-2350.9179790679104, 6724200.750473089], [-2261.512799319951, 6724255.833899855], [-2288.6731251143106, 6724350.035781691], [-2338.390006077725, 6724329.982577351], [-2358.2324573926503, 6724380.663441574], [-2453.631472829075, 6724399.847460075], [-2406.4214726799987, 6724529.96078206], [-2445.771036340816, 6724572.019318527], [-2364.9166962277136, 6724628.155216679], [-2464.341484087575, 6724719.125785246], [-2626.683905143214, 6724864.887496843], [-1916.3209553555016, 6724990.301968741], [-1933.790084186832, 6725066.422087133], [-1994.821142936845, 6725325.0366510805], [-2033.6763248720406, 6725564.925882149], [-2112.2786961639513, 6725685.212287669], [-2138.317228861696, 6725818.003326733], [-2085.43499837218, 6725975.887345439], [-2055.7989230538556, 6726024.599414295], [-1968.4447234297659, 6726093.007975688], [-1755.8771144276386, 6726268.792441173], [-1751.5797382438413, 6726274.711884876]]]]}}, {\"id\": \"16\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 017\", \"median\": 100.0, \"count\": 85, \"MSOA11CD\": \"E02000911\", \"MSOA11NM\": \"Waltham Forest 017\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 10872, \"HHOLDRES\": 10868, \"COMESTRES\": 4, \"POPDEN\": 122.1, \"HHOLDS\": 4115, \"AVHHOLDSZ\": 2.6, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-2033.6763248852292, 6725564.925882393], [-1994.8211417902733, 6725325.036651113], [-1933.7900837743548, 6725066.422086812], [-1916.3209550767697, 6724990.301969329], [-2626.683905279924, 6724864.88749634], [-2796.9719448247306, 6724835.274565742], [-2782.249381720391, 6724693.15113722], [-2619.9026392636556, 6724703.039272035], [-2628.851876177457, 6724628.010771963], [-2810.4379136063126, 6724577.591304579], [-2814.728184009648, 6724516.587694262], [-2792.915088251627, 6724476.067957675], [-2737.494775673286, 6724143.327090106], [-2771.035981223327, 6724126.034580478], [-2717.3381639124664, 6724084.862233645], [-2791.933523960871, 6724095.479302526], [-3068.1652829260447, 6723968.783870289], [-3102.5474150681216, 6723779.911237536], [-3122.4357212134573, 6723770.60469849], [-3145.747713879899, 6723759.696003641], [-3204.9088490792033, 6723820.333209725], [-3217.6055951406447, 6724011.048671045], [-3305.027408593361, 6723980.149592076], [-3408.932744054876, 6723909.3032045895], [-3466.4777389403125, 6723952.755201881], [-3534.9506933940756, 6723898.039662849], [-3658.0277845441237, 6723904.020691044], [-3698.7779211072143, 6723932.991204427], [-3786.745428749692, 6723838.097240532], [-3924.13637390495, 6724006.645389649], [-3980.7788161539593, 6724076.467576798], [-4054.312625166054, 6724167.847446858], [-3958.0809329854983, 6724251.340119772], [-3897.685098359187, 6724303.738661378], [-4042.8788328529035, 6724473.699967894], [-4068.454481591924, 6724531.216207061], [-4025.4681119404345, 6724560.954280306], [-4040.316381112534, 6724598.006514034], [-4078.399159073809, 6724587.501492851], [-4087.2028010599074, 6724628.49929158], [-4040.47316482685, 6724651.230196439], [-4057.983849965244, 6724698.918578941], [-4079.8127154478134, 6724801.131309068], [-3774.893383376735, 6724895.73303556], [-3746.4807049155834, 6724904.580571244], [-3695.124930620802, 6724877.500711967], [-3646.0614873016057, 6724921.706658959], [-3783.037923301409, 6725041.470121977], [-3784.07547963105, 6725120.567250395], [-3657.2176487515176, 6725192.727129668], [-3441.1240308657893, 6725287.73212438], [-3477.187259732379, 6725352.793015225], [-3694.6969040961176, 6725264.23555889], [-3721.04800563029, 6725313.818238699], [-3733.89500433563, 6725345.558136777], [-3682.3880843796264, 6725388.616577686], [-3562.685214607567, 6725503.072881318], [-3488.228266496992, 6725475.242089885], [-3176.309231143087, 6725613.955755314], [-3098.3949572960923, 6725497.943562938], [-3078.1820507088746, 6725499.090216329], [-3070.1184795071795, 6725454.691065609], [-3009.2641446898456, 6725480.716395059], [-2734.9824764224186, 6725598.00891943], [-2719.6855187633823, 6725542.576987879], [-2479.130317163545, 6725599.106340452], [-2457.2818765018833, 6725604.686496386], [-2156.072949100883, 6725681.602072015], [-2112.278696044324, 6725685.212288037], [-2033.6763248852292, 6725564.925882393]]]]}}, {\"id\": \"17\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 018\", \"median\": 79.0, \"count\": 66, \"MSOA11CD\": \"E02000912\", \"MSOA11NM\": \"Waltham Forest 018\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9238, \"HHOLDRES\": 9143, \"COMESTRES\": 95, \"POPDEN\": 37.0, \"HHOLDS\": 3151, \"AVHHOLDSZ\": 2.9, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-4913.9482220533655, 6724855.83412497], [-4585.990786611866, 6724353.458410107], [-4488.164722036674, 6724391.95500245], [-4408.048185575438, 6724442.974298941], [-4228.83454372621, 6724531.3817265015], [-4078.399160255477, 6724587.5014921175], [-4040.3163819603697, 6724598.006513293], [-4025.46811330037, 6724560.9542812165], [-4068.454480409592, 6724531.216207723], [-4042.8788325781106, 6724473.699969507], [-3897.6850988825727, 6724303.738661854], [-3958.0809326148437, 6724251.340119476], [-4054.312625105289, 6724167.847445993], [-3980.7788148803693, 6724076.467576476], [-3924.1363744119603, 6724006.645390947], [-3786.7454280012585, 6723838.09724169], [-3698.7779200551317, 6723932.991203708], [-3658.027783098373, 6723904.020690199], [-3534.9506924818015, 6723898.039664194], [-3466.4777390086456, 6723952.75520221], [-3408.932743878821, 6723909.303204687], [-3305.0274091204205, 6723980.149591586], [-3217.605593778762, 6724011.048670674], [-3204.9088505710256, 6723820.333210763], [-3145.7477125104037, 6723759.69600273], [-3122.4357201528774, 6723770.604699184], [-3102.547414924551, 6723779.9112360515], [-3068.165281470956, 6723968.783870767], [-2791.933525122092, 6724095.479302569], [-2717.3381631931984, 6724084.86223304], [-2771.035981786146, 6724126.034580917], [-2737.49477694962, 6724143.327090955], [-2792.9150883162865, 6724476.067958938], [-2814.7281838865247, 6724516.587693124], [-2810.4379129085087, 6724577.5913039055], [-2628.851877228787, 6724628.01077304], [-2619.902639285209, 6724703.039273006], [-2782.2493814413933, 6724693.151137957], [-2796.9719446165004, 6724835.274566454], [-2626.683903860817, 6724864.88749721], [-2464.3414837583455, 6724719.125785382], [-2364.9166963023754, 6724628.155217972], [-2445.77103675825, 6724572.019317177], [-2406.42147200813, 6724529.960782362], [-2453.6314734799216, 6724399.847461371], [-2358.2324556983954, 6724380.663443279], [-2338.390006960745, 6724329.982578881], [-2288.6731260260535, 6724350.035780631], [-2261.512800781457, 6724255.83389947], [-2350.9179794712704, 6724200.750472436], [-2227.829509863584, 6723888.49370774], [-2225.8621771096223, 6723883.520419374], [-2325.3016694612143, 6723836.0324335145], [-2321.2078149296126, 6723829.181110353], [-2249.038503298999, 6723714.643284316], [-2343.3896293843995, 6723662.246386936], [-2305.6797997358135, 6723599.098202552], [-2378.2790697837336, 6723535.152305456], [-2309.9740076079233, 6723402.113645994], [-2214.727942534088, 6723453.245399481], [-2177.5698638461868, 6723408.5205199765], [-1979.5922799366124, 6723510.840929227], [-1958.5375261698698, 6723377.903195152], [-1865.727493413887, 6723427.764758293], [-1898.2372295740715, 6723316.122417246], [-2052.1170124109058, 6723225.130805931], [-2001.7259061049872, 6723153.466636693], [-2010.6643448534014, 6723050.2910993695], [-2042.1555445679264, 6723037.108892258], [-2067.5856764225946, 6723084.400274445], [-2119.031061563421, 6723068.253188487], [-2224.8699172745883, 6723262.723141162], [-2319.553666356044, 6723211.565941563], [-2202.21835170862, 6722988.35430735], [-2419.9798189451576, 6722910.987837849], [-2513.843380799602, 6722856.865518612], [-2549.741499659102, 6722785.012126942], [-2617.3345288677056, 6722802.839143255], [-2665.124548722974, 6722752.750106441], [-2713.006779180693, 6722838.163716529], [-2893.2905061111833, 6723100.976603251], [-2940.2429866355783, 6723199.664612436], [-2998.0229396096083, 6723171.975757006], [-3231.8106999967954, 6723087.447042558], [-3267.853073296525, 6723233.110880396], [-3434.870433227604, 6723409.169764483], [-3474.663095406446, 6723435.741023993], [-3663.8777789134656, 6723338.749807848], [-3716.4003710190923, 6723383.533867975], [-3957.1474982859067, 6723228.233542489], [-3998.7791278822656, 6723308.463022301], [-4100.984453259219, 6723271.210124821], [-4954.284420405421, 6722825.257895654], [-5186.156521376213, 6723001.48359093], [-5516.7885093155755, 6722247.866440603], [-5737.737274522719, 6722400.4397982], [-5791.530818468519, 6722509.914228711], [-5880.240828626541, 6722709.373537051], [-6059.104357911036, 6722767.431960132], [-6073.0676038346655, 6722776.004719334], [-6153.866530360609, 6722916.010779016], [-6324.623432822072, 6723108.236272257], [-6341.982066142572, 6723224.40160592], [-6421.850150763006, 6723434.6822274085], [-6510.231698934024, 6723665.100044124], [-6631.148115182214, 6724050.387954834], [-6722.036615832527, 6724230.212665354], [-6745.420467464879, 6724384.662469554], [-6614.933485608425, 6724595.204923505], [-6365.6213378768025, 6724518.330545851], [-5159.442898274021, 6725033.970722653], [-4913.9482220533655, 6724855.83412497]]]]}}, {\"id\": \"18\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 019\", \"median\": 77.0, \"count\": 34, \"MSOA11CD\": \"E02000913\", \"MSOA11NM\": \"Waltham Forest 019\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8706, \"HHOLDRES\": 8660, \"COMESTRES\": 46, \"POPDEN\": 82.4, \"HHOLDS\": 2968, \"AVHHOLDSZ\": 2.9, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[334.9368382226612, 6724774.826903536], [314.1921037409723, 6724662.617894083], [444.7430854673917, 6724676.7529503945], [463.56949057358094, 6724542.513692897], [961.302788758025, 6724198.081055084], [1403.8489258736095, 6723965.638966205], [1069.421262049653, 6723723.553726568], [1099.532439602985, 6723660.521072451], [909.652299691906, 6723586.083434844], [943.7879676529496, 6723546.758676598], [776.2248956912736, 6723417.18248424], [730.586030338048, 6723478.674084479], [280.01616833628736, 6723137.169512907], [313.0970012067535, 6723060.140608591], [210.98981002697153, 6723078.875291798], [307.5310911273145, 6722965.393688059], [258.16997053384915, 6722921.007987027], [219.2656699143881, 6722885.054228152], [-17.88082138183719, 6722661.5921874335], [-69.71022845663417, 6722629.773007346], [-138.7210246763879, 6722595.36744873], [-418.9930860200778, 6722453.085773412], [-614.251098996684, 6722563.816053275], [-743.6318803382, 6722637.182742079], [-742.1721902776978, 6722649.387512594], [-759.8724566167132, 6723064.707813605], [-779.9355984125018, 6723211.207230438], [-915.7460729145928, 6723353.601897456], [-1012.947100111836, 6723424.0076747155], [-868.0478811550663, 6723550.051556897], [-839.562263412727, 6723470.138410834], [-897.6053465717283, 6723435.115456378], [-830.84855604302, 6723405.734404729], [-754.3116300231551, 6723583.523590759], [-689.2497629274973, 6723633.271283121], [-680.2034301555145, 6723944.080737531], [-619.2984758904388, 6724108.081066744], [-624.7373688481719, 6724111.574284326], [-485.57869300100504, 6724264.066341658], [-251.99255185475963, 6724413.99637488], [-228.11202890685504, 6724428.217015965], [-73.25668928456045, 6724530.35168359], [222.7237424992045, 6724730.473890036], [267.1981343930048, 6724745.652267695], [334.9368382226612, 6724774.826903536]]]]}}, {\"id\": \"19\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 020\", \"median\": 63.0, \"count\": 56, \"MSOA11CD\": \"E02000914\", \"MSOA11NM\": \"Waltham Forest 020\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 10594, \"HHOLDRES\": 10499, \"COMESTRES\": 95, \"POPDEN\": 151.4, \"HHOLDS\": 3689, \"AVHHOLDSZ\": 2.8, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-1079.9958117061938, 6724525.859049834], [-1029.2841870749298, 6724332.071286793], [-961.0584535701879, 6724377.697217056], [-792.7171838561544, 6724369.72744554], [-799.2145047482737, 6724302.036348532], [-697.9821704744483, 6724252.800103084], [-508.61302938025227, 6724287.9150468735], [-485.578693528197, 6724264.066341845], [-624.7373694703398, 6724111.574284059], [-619.2984750113134, 6724108.081066907], [-680.203429250366, 6723944.0807376215], [-689.2497627697203, 6723633.271283481], [-754.3116294111663, 6723583.523590658], [-830.8485565825598, 6723405.734404504], [-897.6053470521405, 6723435.115456245], [-839.5622628012693, 6723470.138411212], [-868.0478806742559, 6723550.051556791], [-1012.9470998640841, 6723424.007674672], [-915.7460723749646, 6723353.601897466], [-779.9355975107168, 6723211.207230112], [-759.872456606357, 6723064.707814197], [-742.1721896470767, 6722649.387511963], [-836.2621943891762, 6722706.096966665], [-945.2439942299485, 6722785.30697317], [-764.7099651709403, 6722936.555339412], [-806.9920256782785, 6722980.781540736], [-902.087877048547, 6722942.519102172], [-1299.1040538700372, 6722613.297367371], [-1275.3361881179017, 6722572.756914635], [-1423.7378667824905, 6722523.285326809], [-1453.6167989683195, 6722566.935966896], [-1625.9791551850465, 6722505.519571613], [-1509.8890801477125, 6722281.2442451315], [-1548.446711849376, 6722257.208702308], [-1635.6673630652786, 6722305.532140478], [-1765.2444812784242, 6722508.689879067], [-1780.0208142416539, 6722675.316654351], [-2042.6738807434106, 6722504.847671517], [-2099.9088326893293, 6722485.607242021], [-2059.078080468032, 6722582.700204077], [-2095.934311504556, 6722666.008916195], [-2058.4284673713646, 6722685.47661756], [-2008.7364335322754, 6722609.351958559], [-1881.5029848747718, 6722670.587215418], [-1860.7175304718091, 6722739.104396405], [-1946.5355385514854, 6722829.98370967], [-2025.7689977568255, 6722961.723428991], [-2094.8337126131814, 6722954.657113114], [-2117.050041474595, 6723000.484936527], [-2042.1555441964756, 6723037.108892876], [-2010.6643450420256, 6723050.291098619], [-2001.7259048772478, 6723153.466636586], [-2052.117010864072, 6723225.130807133], [-1898.2372308672232, 6723316.122417947], [-1865.7274930561118, 6723427.764757891], [-1958.5375271014843, 6723377.90319584], [-1979.5922795346241, 6723510.840928708], [-2177.5698635303675, 6723408.520520692], [-2214.7279424813773, 6723453.245398607], [-2014.9950800271504, 6723558.541606717], [-1783.0698164159428, 6723683.397764423], [-1725.6276340334357, 6723715.651103045], [-1714.5411821981393, 6723721.875228817], [-1538.0615115826122, 6723812.165126361], [-1488.4280533393446, 6723832.916792669], [-1551.2460167667055, 6723868.76093022], [-1539.2286395479384, 6723944.78360354], [-1617.7910200906847, 6723967.941598473], [-1230.3055135164025, 6724174.132542981], [-1205.7864035044781, 6724107.355864217], [-1157.73150184325, 6724115.733317194], [-1172.5173244632858, 6724231.414688062], [-1223.5149049190402, 6724282.430672944], [-1270.9342158117327, 6724282.291881539], [-1274.5666535957173, 6724288.89149049], [-1223.8134535622153, 6724351.600975538], [-1250.3712844294532, 6724487.830487847], [-1190.9976665222093, 6724460.651060927], [-1139.60321473498, 6724479.501498799], [-1079.9958117061938, 6724525.859049834]]]]}}, {\"id\": \"20\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 021\", \"median\": 72.0, \"count\": 80, \"MSOA11CD\": \"E02000915\", \"MSOA11NM\": \"Waltham Forest 021\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 8643, \"HHOLDRES\": 8399, \"COMESTRES\": 244, \"POPDEN\": 57.9, \"HHOLDS\": 3305, \"AVHHOLDSZ\": 2.5, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[942.1715602960865, 6725078.995667908], [1300.3932475537074, 6725062.590930412], [1835.8398550858228, 6725055.531321179], [1906.5839694206497, 6725053.176401988], [1878.1748847350982, 6724896.7965084845], [1925.2970255459963, 6724780.622412228], [1876.7308260879975, 6724752.644889897], [2048.308193470186, 6724240.388524144], [2117.103897023244, 6723884.8415886145], [2115.913249375632, 6723445.859224596], [2012.4483155340238, 6723210.548496599], [2013.1940485079012, 6723172.568642617], [2016.5455620984687, 6723104.821451654], [1918.6433158354137, 6723092.805990286], [1943.3734904783103, 6722960.036412618], [1821.5292557599919, 6722773.787127154], [1629.5741238749877, 6722639.016767548], [1431.0722312889932, 6722842.80805803], [1262.5937890369626, 6722646.379999831], [1215.626928459865, 6722567.935314192], [1109.8007862024183, 6722559.429796823], [1042.4065283803202, 6722518.16867716], [1013.3933753994999, 6722471.71522428], [971.2941563623381, 6722366.939192388], [951.9763451926775, 6722310.901671901], [876.9797433997559, 6722153.512039271], [649.9651264761928, 6722066.507992814], [436.0884059813638, 6721973.70504693], [402.00235777602154, 6721996.411970219], [148.2278230656204, 6722140.048419919], [-18.763902380565707, 6722233.869725926], [-413.34531414253627, 6722449.991674272], [-418.99308598599976, 6722453.085772459], [-138.72102453175532, 6722595.367447599], [-69.71022958908782, 6722629.773006901], [-17.880821418437908, 6722661.592186804], [219.26567118939423, 6722885.054228785], [258.169970241663, 6722921.007987122], [307.53109172890277, 6722965.39368726], [210.98980986835366, 6723078.87529247], [313.09700073727294, 6723060.140608369], [280.01616835607035, 6723137.169513617], [730.5860314219957, 6723478.67408541], [776.2248951739067, 6723417.182484364], [943.7879671907273, 6723546.758675825], [909.6523006098006, 6723586.0834345585], [1099.5324392387924, 6723660.521071928], [1069.4212616786447, 6723723.553725482], [1403.848926367387, 6723965.6389656095], [961.3027893212866, 6724198.0810552705], [463.56948951171756, 6724542.51369307], [444.74308518640265, 6724676.7529501], [314.1921034444047, 6724662.617893953], [334.93683913489093, 6724774.826903384], [267.1981344236308, 6724745.65226844], [475.57024212771137, 6724875.224357355], [637.4622090381866, 6724981.873682782], [841.0477666229535, 6725127.34724338], [942.1715602960865, 6725078.995667908]]]]}}, {\"id\": \"21\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 022\", \"median\": 75.0, \"count\": 98, \"MSOA11CD\": \"E02000916\", \"MSOA11NM\": \"Waltham Forest 022\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9485, \"HHOLDRES\": 9482, \"COMESTRES\": 3, \"POPDEN\": 42.7, \"HHOLDS\": 3506, \"AVHHOLDSZ\": 2.7, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-3434.870433365952, 6723409.169766078], [-3267.8530749032393, 6723233.11088214], [-3231.81069909116, 6723087.447043255], [-2998.0229379834213, 6723171.975758727], [-2940.242986560518, 6723199.66461102], [-2893.290505993813, 6723100.9766041655], [-2713.006778136134, 6722838.163716034], [-2665.1245481077103, 6722752.750107306], [-2617.3345294341093, 6722802.839141603], [-2549.7414996507373, 6722785.012127179], [-2513.8433813944634, 6722856.865519858], [-2419.9798201571857, 6722910.987838378], [-2202.2183518711327, 6722988.354307917], [-2319.553666323249, 6723211.5659413785], [-2224.86991838602, 6723262.7231394285], [-2119.031061764393, 6723068.2531897025], [-2067.585677331992, 6723084.400274018], [-2042.1555443838163, 6723037.108892924], [-2117.050041843656, 6723000.484936337], [-2094.8337120063707, 6722954.657112132], [-2025.7689978241406, 6722961.723428594], [-1946.5355386306614, 6722829.9837095905], [-1860.7175302833618, 6722739.10439613], [-1881.5029843394807, 6722670.587215668], [-2008.736432873728, 6722609.3519585235], [-2058.428467322549, 6722685.476618156], [-2095.9343104475606, 6722666.008916262], [-2059.0780811776526, 6722582.7002045205], [-2099.9088334135104, 6722485.607241894], [-2042.673882112773, 6722504.847671377], [-2019.4277089138022, 6722461.584380607], [-1945.9535745766711, 6722325.0386870885], [-1927.1228245792483, 6722289.801148451], [-1889.0815573461236, 6722219.011653101], [-1945.0426893449326, 6722177.432815346], [-2146.869372624865, 6722060.438163554], [-2184.978360961859, 6722038.332077087], [-2134.449134561523, 6721904.893625344], [-2411.0294482694712, 6721757.754273088], [-2516.8873272050214, 6721701.729615002], [-2686.348874108658, 6721623.469436265], [-2989.1596556860077, 6721482.24904143], [-3173.6263108865364, 6721229.991021324], [-3172.18001286383, 6721108.289329572], [-3527.597274144086, 6720976.098601388], [-3674.613480956728, 6721048.678918209], [-3934.776261314835, 6721129.5220862515], [-3948.4351594268114, 6721125.58860969], [-4160.022124738241, 6721083.539910503], [-4272.14662513841, 6721183.620929505], [-4532.629660450888, 6721113.422787661], [-4840.865877811776, 6721179.672553293], [-4897.623304507031, 6721260.986919524], [-5080.320909150668, 6721348.268776318], [-5021.002543240406, 6721536.864499614], [-5021.502522256102, 6721649.010726176], [-5127.323050848791, 6721819.288578789], [-5516.788509648832, 6722247.866440088], [-5186.1565220921175, 6723001.483592616], [-4954.284420475746, 6722825.257894006], [-4100.98445235376, 6723271.210124974], [-3998.7791262832525, 6723308.463021938], [-3957.1474977526073, 6723228.23354356], [-3716.4003722011585, 6723383.533869126], [-3663.87778051509, 6723338.749807536], [-3474.6630967226997, 6723435.741025766], [-3434.870433365952, 6723409.169766078]]]]}}, {\"id\": \"22\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 023\", \"median\": 70.0, \"count\": 117, \"MSOA11CD\": \"E02000917\", \"MSOA11NM\": \"Waltham Forest 023\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9171, \"HHOLDRES\": 9148, \"COMESTRES\": 23, \"POPDEN\": 135.1, \"HHOLDS\": 3396, \"AVHHOLDSZ\": 2.7, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-614.2510990494386, 6722563.816053502], [-418.9930857164733, 6722453.0857727835], [-413.3453143620963, 6722449.991675029], [-18.763903038714766, 6722233.869725678], [-46.97297353388484, 6722083.597407874], [104.15403279735897, 6721967.525331812], [94.97774294310793, 6721908.126050601], [149.6260943823986, 6721849.876502445], [22.675404436518146, 6721632.617018428], [100.58521296879312, 6721569.3575753], [-86.82920923460894, 6721331.235391044], [-109.76186076332452, 6721385.619756044], [-190.96415815085766, 6721366.8623334905], [-258.07323050859685, 6721312.001335213], [-314.2898877932407, 6721387.537010413], [-514.1668149986149, 6721595.033127213], [-551.1731868350329, 6721563.239518755], [-624.464113484944, 6721618.909599726], [-669.4327614702123, 6721582.451653207], [-703.0835867900499, 6721615.069754732], [-960.3569554267369, 6721832.5864274455], [-999.8710146777343, 6721721.450502045], [-1051.2017759345704, 6721744.784044205], [-1022.5595888908938, 6721394.343761783], [-1050.8388593415996, 6721374.514556712], [-1104.0796119131232, 6721337.17793256], [-1150.155288898498, 6721383.4878407195], [-1168.0675702044805, 6721451.893476084], [-1531.1879459655968, 6721293.288177005], [-1511.5884261716908, 6721430.035111094], [-1619.6150430476498, 6721376.331661083], [-1638.8254402411858, 6721438.052579239], [-1494.2248662951565, 6721498.534339648], [-1716.236012696126, 6721840.671159517], [-1670.311120432691, 6721876.971486809], [-1697.962565374266, 6721913.440047015], [-1647.7286041741654, 6722000.049067496], [-1564.5819021063564, 6721960.735317635], [-1525.8254733139945, 6721992.220044037], [-1613.6272681550365, 6722106.399478698], [-1534.194336090611, 6722160.322853082], [-1548.4467118514563, 6722257.208702108], [-1509.8890808190502, 6722281.244244472], [-1625.979154794919, 6722505.519572091], [-1453.6167987337562, 6722566.935967297], [-1423.7378662908814, 6722523.2853266755], [-1275.3361881074568, 6722572.756914434], [-1299.1040536295436, 6722613.297368062], [-902.0878767832693, 6722942.51910269], [-806.9920255810013, 6722980.781540441], [-764.7099654513098, 6722936.555339577], [-945.2439942128651, 6722785.30697355], [-836.2621946239608, 6722706.096966547], [-742.1721896895637, 6722649.387511994], [-743.6318800731435, 6722637.182741837], [-614.2510990494386, 6722563.816053502]]]]}}, {\"id\": \"23\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 024\", \"median\": 100.0, \"count\": 77, \"MSOA11CD\": \"E02000918\", \"MSOA11NM\": \"Waltham Forest 024\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9126, \"HHOLDRES\": 9041, \"COMESTRES\": 85, \"POPDEN\": 109.6, \"HHOLDS\": 3449, \"AVHHOLDSZ\": 2.6, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[2125.9146520871104, 6723120.041101492], [2186.353508235371, 6723017.5904660765], [2284.7947385464354, 6723058.9090724345], [2291.2968507958303, 6722927.835956714], [2305.941056233526, 6722642.217713666], [2147.6731662934117, 6722655.989218025], [2237.3525079527694, 6722319.388226314], [2289.90218714177, 6722026.6401422685], [2244.1924569316707, 6721946.4217362255], [2129.871116971897, 6721874.839251177], [1787.3193614568015, 6721868.035180497], [1787.4791064945491, 6721775.59907774], [1769.7232041731654, 6721538.536995987], [1761.8733575252495, 6721425.515324904], [1759.6288990126893, 6721175.77435534], [1776.4420439927246, 6721011.771709469], [1790.0918150139835, 6720935.0842599645], [1688.8746374518116, 6720891.034014884], [1686.3018730755514, 6720797.438021657], [1556.8049989333094, 6720832.890586268], [1431.5889703067046, 6720789.361900134], [1394.0048027414193, 6720838.181765285], [1372.3244444138186, 6720719.868160379], [1141.998996525716, 6720577.879627403], [983.2280926656216, 6720714.038735922], [1033.998604025361, 6720853.786185559], [1081.035458452184, 6720961.334111128], [1151.5368040370836, 6721131.997681768], [1185.5889089525551, 6721261.407686961], [1237.6257024684583, 6721403.1511083795], [1161.6214127717928, 6721469.271476401], [1071.8736033275493, 6721535.739786841], [859.9860212729862, 6721685.445055641], [802.8886786682516, 6721711.289146784], [665.9342670189457, 6721544.564531564], [615.6839083211347, 6721542.649880415], [534.9245816955158, 6721912.0750624845], [436.0884055880499, 6721973.705047224], [649.9651256643828, 6722066.507992105], [876.9797436161737, 6722153.512039637], [951.9763449798887, 6722310.901671171], [971.2941572135813, 6722366.93919253], [1013.3933756823035, 6722471.715225012], [1042.406529406645, 6722518.168677639], [1109.8007862975712, 6722559.429796943], [1215.6269287335958, 6722567.935314106], [1262.593788763984, 6722646.380000711], [1431.0722311405545, 6722842.808058213], [1629.574123290394, 6722639.0167673], [1821.5292563182081, 6722773.787127574], [1943.3734916925514, 6722960.036412865], [1918.6433159475614, 6723092.805990526], [2016.5455608576292, 6723104.821452502], [2013.1940482812602, 6723172.568642862], [2125.9146520871104, 6723120.041101492]]]]}}, {\"id\": \"24\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 025\", \"median\": 70.0, \"count\": 90, \"MSOA11CD\": \"E02000919\", \"MSOA11NM\": \"Waltham Forest 025\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9221, \"HHOLDRES\": 9200, \"COMESTRES\": 21, \"POPDEN\": 164.0, \"HHOLDS\": 3225, \"AVHHOLDSZ\": 2.9, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[534.9245814368767, 6721912.075063283], [615.6839092333645, 6721542.649880518], [665.9342663704005, 6721544.5645310525], [590.7409418059398, 6721436.312073782], [518.9705811015979, 6721336.56131505], [321.8238583965052, 6721102.927566469], [217.00505521140937, 6720990.998107283], [2.2236866024601882, 6720766.147171112], [-95.5058907546106, 6720663.19155236], [-285.99192852638373, 6720477.78041201], [-481.6389338514082, 6720275.212949651], [-519.5966416787186, 6720383.517529048], [-647.3461185591912, 6720673.852976361], [-655.9232461369998, 6720684.945958163], [-890.5560850270085, 6720914.490233121], [-958.3148450094606, 6721138.62405045], [-986.2663506463309, 6721244.619256009], [-1022.5595889220066, 6721394.343761689], [-1051.2017757522308, 6721744.784044347], [-999.8710151753623, 6721721.450501874], [-960.3569556227964, 6721832.5864271205], [-703.0835863234018, 6721615.069754454], [-669.4327617400485, 6721582.45165247], [-624.4641134898567, 6721618.909599767], [-551.1731864309645, 6721563.239518579], [-514.1668142766026, 6721595.033127488], [-314.28988825369277, 6721387.537010383], [-258.07323057839045, 6721312.001334483], [-190.9641577260769, 6721366.8623338705], [-109.76186085321092, 6721385.619755151], [-86.82920947107525, 6721331.2353908885], [100.58521223067126, 6721569.35757486], [22.675404745123714, 6721632.617018219], [149.6260942825986, 6721849.876502765], [94.977743316152, 6721908.1260511605], [104.15403308038385, 6721967.525331008], [-46.972973742601866, 6722083.597407449], [-18.76390258277693, 6722233.869725985], [148.22782383467805, 6722140.048420145], [402.0023582920164, 6721996.411970029], [436.0884054223066, 6721973.70504714], [534.9245814368767, 6721912.075063283]]]]}}, {\"id\": \"25\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 026\", \"median\": 69.5, \"count\": 86, \"MSOA11CD\": \"E02000920\", \"MSOA11NM\": \"Waltham Forest 026\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 9479, \"HHOLDRES\": 9471, \"COMESTRES\": 8, \"POPDEN\": 54.3, \"HHOLDS\": 3434, \"AVHHOLDSZ\": 2.8, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[-1613.6272677763718, 6722106.399479381], [-1525.8254735968867, 6721992.220044814], [-1564.5819027210891, 6721960.735317512], [-1647.7286036223222, 6722000.049067924], [-1697.9625650840271, 6721913.440046092], [-1670.3111191420178, 6721876.971486651], [-1716.2360129715828, 6721840.671158703], [-1494.2248652967578, 6721498.534339132], [-1638.8254407165527, 6721438.052578947], [-1619.6150437294323, 6721376.331660843], [-1511.5884255520898, 6721430.035110027], [-1531.1879467532867, 6721293.288177506], [-1168.0675705032609, 6721451.893475098], [-1150.1552882232213, 6721383.48784003], [-1104.079611791239, 6721337.177931415], [-1050.8388593374395, 6721374.514555713], [-1022.5595887610873, 6721394.343761073], [-986.2663513115168, 6721244.619255518], [-958.3148447804738, 6721138.624051197], [-890.5560854401497, 6720914.490232117], [-655.9232458992942, 6720684.945957766], [-647.34611770246, 6720673.852977426], [-519.5966427203565, 6720383.517529667], [-481.63893388247675, 6720275.212949591], [-285.99192933115694, 6720477.780411989], [-133.58589456529276, 6720214.017225642], [-335.42912425395053, 6720147.204836427], [-383.16304922298167, 6720051.713386969], [-375.4673985357987, 6719937.523287054], [-356.13959605538236, 6719888.793391729], [-402.22188797846604, 6719813.552485559], [-357.14006345887134, 6719821.631603236], [-362.2448063014583, 6719733.911639386], [-350.12600227912395, 6719717.9357015425], [-316.84734986851294, 6719668.9892974645], [-307.69659182382975, 6719733.071872181], [-282.04071056039226, 6719682.804330971], [-345.67247690078756, 6719592.642203023], [-309.64808565677697, 6719518.585791322], [-310.5602937650247, 6719464.699831577], [-301.0877355975037, 6719362.919855551], [-246.29909705285442, 6719337.872126588], [-243.81362255801548, 6719277.091803444], [-281.4995968116466, 6719262.921771333], [-751.4125925424828, 6719071.0252124835], [-766.0358303650238, 6719066.106921574], [-800.7546486496333, 6719070.048545176], [-805.245122187142, 6719084.859406231], [-874.0717980207698, 6719470.866585811], [-1031.68702316485, 6719543.549246975], [-1708.866443501119, 6719325.673072129], [-1733.288418868679, 6719380.099340119], [-1812.8496794996365, 6719814.054949384], [-1877.1900477605973, 6719989.69879576], [-2395.401874483019, 6720381.447403909], [-2482.0196925834266, 6720385.58398552], [-2533.156642487586, 6720629.6208285345], [-2686.574718362057, 6720828.774330982], [-2912.3156940879176, 6721002.2208285285], [-3172.180013037097, 6721108.2893296145], [-3173.626311804785, 6721229.991020633], [-2989.1596561577007, 6721482.2490415415], [-2686.34887336611, 6721623.469436553], [-2516.8873271341654, 6721701.729614925], [-2411.0294469963237, 6721757.754273316], [-2134.4491335838366, 6721904.8936252305], [-2184.978360852101, 6722038.332076278], [-2146.8693740061326, 6722060.438164646], [-1945.0426897388218, 6722177.432814059], [-1889.0815588242704, 6722219.011652819], [-1927.1228235465062, 6722289.801147825], [-1945.9535737456977, 6722325.038687367], [-2019.427709733623, 6722461.5843808865], [-2042.673882091928, 6722504.847671547], [-1780.0208144620105, 6722675.316654298], [-1765.244480835675, 6722508.689879338], [-1635.6673634329231, 6722305.532140259], [-1548.4467119408114, 6722257.2087031035], [-1534.1943350687561, 6722160.322852524], [-1613.6272677763718, 6722106.399479381]]]]}}, {\"id\": \"26\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 027\", \"median\": 67.0, \"count\": 93, \"MSOA11CD\": \"E02000921\", \"MSOA11NM\": \"Waltham Forest 027\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 11001, \"HHOLDRES\": 10979, \"COMESTRES\": 22, \"POPDEN\": 131.0, \"HHOLDS\": 3966, \"AVHHOLDSZ\": 2.8, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[755.5696901187938, 6719844.898343975], [790.5124522742553, 6719622.478652044], [823.1807142360317, 6719408.557820543], [766.5071530521122, 6719394.799016621], [757.4457910318246, 6719459.778709527], [733.6601213822777, 6719408.481942857], [608.9836361660763, 6719393.169495984], [528.1000722997687, 6719439.736349891], [452.75917126042134, 6719431.424884862], [158.82196741948263, 6719385.31956603], [-227.1890857665368, 6719238.682668922], [-243.81362322320143, 6719277.091803183], [-246.29909666463013, 6719337.872126793], [-301.087735749483, 6719362.919855135], [-310.5602941190824, 6719464.699831233], [-309.64808530997743, 6719518.585791366], [-345.6724767417714, 6719592.642202765], [-282.0407098555076, 6719682.804329834], [-307.69659234725987, 6719733.071872821], [-316.8473487991701, 6719668.989297998], [-350.1260025811795, 6719717.93570195], [-362.24480648021324, 6719733.91163971], [-357.14006288189, 6719821.6316030435], [-402.2218884371478, 6719813.552485698], [-356.13959652782813, 6719888.793391337], [-375.4673973942723, 6719937.523287395], [-383.1630501114453, 6720051.713386901], [-335.42912510793775, 6720147.204835222], [-133.58589494873726, 6720214.01722587], [-285.9919287476256, 6720477.780412798], [-95.50589083776991, 6720663.191552237], [2.2236861272704607, 6720766.147171405], [217.0050550140222, 6720990.998107175], [321.8238580009785, 6721102.927566802], [518.9705813624942, 6721336.561315793], [590.7409424288159, 6721436.3120742105], [665.9342666356782, 6721544.564531643], [802.8886786627637, 6721711.289146522], [859.9860206345759, 6721685.445055568], [1071.8736039140458, 6721535.739787217], [1161.6214136529538, 6721469.271475856], [1237.6257024249976, 6721403.151108447], [1185.5889083581365, 6721261.4076863], [1151.5368038163729, 6721131.997681454], [1081.035458322245, 6720961.334111447], [1033.9986040450553, 6720853.786184585], [983.2280924456633, 6720714.038736174], [963.8745055639921, 6720632.700819276], [853.615441294483, 6720280.285953295], [784.7234273379185, 6719994.791765389], [774.2553241786077, 6719949.85103908], [761.5718269694142, 6719892.911246624], [755.5696901187938, 6719844.898343975]]]]}}, {\"id\": \"27\", \"type\": \"Feature\", \"properties\": {\"msoa11nm\": \"Waltham Forest 028\", \"median\": 80.0, \"count\": 86, \"MSOA11CD\": \"E02000922\", \"MSOA11NM\": \"Waltham Forest 028\", \"LAD11CD\": \"E09000031\", \"LAD11NM\": \"Waltham Forest\", \"RGN11CD\": \"E12000007\", \"RGN11NM\": \"London\", \"USUALRES\": 10523, \"HHOLDRES\": 10471, \"COMESTRES\": 52, \"POPDEN\": 161.2, \"HHOLDS\": 3740, \"AVHHOLDSZ\": 2.8, \"Borough\": \"Waltham Forest\", \"Subregion\": \"Outer East and North East\"}, \"geometry\": {\"type\": \"MultiPolygon\", \"coordinates\": [[[[1790.0918142865276, 6720935.0842598], [1825.0392955316568, 6720764.075952842], [1993.1343044532073, 6720726.314784906], [2194.6263343133382, 6720530.612535098], [2204.596967122449, 6720516.727715174], [2397.829878336811, 6720259.4602678865], [2445.10605668363, 6720196.139088729], [2577.9715602266006, 6719947.447013788], [2530.412673457367, 6719922.951502486], [2416.6906733250016, 6719864.370098221], [2270.150765942899, 6719778.1275502], [2112.8738319563727, 6719674.353026743], [1990.2426904076592, 6719651.15520979], [1966.8752414683722, 6719695.541080644], [1803.045784204243, 6719961.229655037], [1692.8664321035185, 6719899.427467031], [1521.0257086157517, 6719802.049880709], [1474.3305756601362, 6719775.582957212], [1417.580746114845, 6719861.673271935], [1252.3961079945113, 6719689.416867785], [1385.3825061261566, 6719478.754903187], [1256.2895951947482, 6719359.321016613], [1239.2426846881856, 6719295.790787642], [1143.9696980646922, 6719276.16446364], [945.3953032854038, 6719232.7342494335], [793.1790905816054, 6719192.153675386], [797.4411673475585, 6719203.772000272], [820.6849274156336, 6719267.131868474], [827.7460980710395, 6719375.644474515], [823.1807142069547, 6719408.557820813], [790.5124520892601, 6719622.478652424], [755.5696899910674, 6719844.898344725], [761.5718275538751, 6719892.911246939], [774.2553245938731, 6719949.851038816], [784.723426801344, 6719994.791764674], [853.6154415013413, 6720280.285952911], [963.87450562728, 6720632.700819691], [983.2280926236658, 6720714.038736303], [1141.9989970674242, 6720577.879626981], [1372.324445192657, 6720719.868160566], [1394.0048026535246, 6720838.181765356], [1431.5889699396796, 6720789.361899274], [1556.80499909861, 6720832.890586075], [1686.3018723624793, 6720797.438021738], [1688.8746367390936, 6720891.0340149775], [1790.0918142865276, 6720935.0842598]]]]}}], \"crs\": {\"type\": \"name\", \"properties\": {\"name\": \"urn:ogc:def:crs:EPSG::3785\"}}}"}},"view":{"type":"object","name":"CDSView","id":"p1160","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1161"}}},"glyph":{"type":"object","name":"Patches","id":"p1156","attributes":{"xs":{"type":"field","field":"xs"},"ys":{"type":"field","field":"ys"},"line_color":{"type":"value","value":"white"},"line_width":{"type":"value","value":0.5},"fill_color":{"type":"field","field":"median","transform":{"type":"object","name":"LinearColorMapper","id":"p1121","attributes":{"palette":["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],"low":43.5,"high":117.5}}},"fill_alpha":{"type":"value","value":0.5}}},"nonselection_glyph":{"type":"object","name":"Patches","id":"p1157","attributes":{"xs":{"type":"field","field":"xs"},"ys":{"type":"field","field":"ys"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.1},"line_width":{"type":"value","value":0.5},"fill_color":{"type":"field","field":"median","transform":{"id":"p1121"}},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Patches","id":"p1158","attributes":{"xs":{"type":"field","field":"xs"},"ys":{"type":"field","field":"ys"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.2},"line_width":{"type":"value","value":0.5},"fill_color":{"type":"field","field":"median","transform":{"id":"p1121"}},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1133","attributes":{"tools":[{"type":"object","name":"WheelZoomTool","id":"p1146","attributes":{"renderers":"auto"}},{"type":"object","name":"PanTool","id":"p1147"},{"type":"object","name":"ResetTool","id":"p1148"},{"type":"object","name":"HoverTool","id":"p1149","attributes":{"renderers":"auto","tooltips":[["Borough","@Borough"],["Neighbourhood","@msoa11hclnm"],["Count of Listings","@count"],["Median Price","$@median"]],"point_policy":"follow_mouse"}}]}},"left":[{"type":"object","name":"LinearAxis","id":"p1141","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1142","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1143"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1144"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1136","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1137","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1138"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1139"}}},{"type":"object","name":"ColorBar","id":"p1122","attributes":{"location":[0,0],"orientation":"horizontal","height":10,"width":500,"major_label_policy":{"type":"object","name":"NoOverlap","id":"p1123"},"label_standoff":8,"color_mapper":{"id":"p1121"}}}],"center":[{"type":"object","name":"Grid","id":"p1140","attributes":{"axis":{"id":"p1136"},"grid_line_color":null}},{"type":"object","name":"Grid","id":"p1145","attributes":{"dimension":1,"axis":{"id":"p1141"},"grid_line_color":null}}]}}]}};
  const render_items = [{"docid":"1bbdf5f5-b493-437b-9fca-9544d6ea1379","roots":{"p1124":"d67d7045-cbfb-4757-8e48-307ea231e8d3"},"root_ids":["p1124"],"notebook_comms_target":"p1162"}];
  void root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ðŸ”— Connections
</div>
</div>
<div class="callout-body-container callout-body">
<p>And thatâ€™s it. Thatâ€™s all she wrote! Youâ€™ve now covered in &lt;10 weeks what many people might take 10 <em>months</em> to cover. So do not feel like either: 1) you know it all; or 2) you know nothing. You have learned a <em>lot</em>, but itâ€™s probably just enough to see how much you <em>donâ€™t</em> know. And <em>that</em> is the start of wisdom. Good luck, young Python-master!</p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 2022â€“2024, Jon Reades</p>
</div>   
    <div class="nav-footer-center">
<p><img src="../img/favicon-16x16.png" class="height:10px img-fluid"> Foundations of Spatial Data Science</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jreades/fsds/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jreades/fsds">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/jreades">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>