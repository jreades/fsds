<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jon Reades">

<title>Linking (Spatial) Data – Foundations of Spatial Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//img/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-fb446d74831b8ff67c69632cb314b545.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c734b2b4d74e7e594e143a63449c09f7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta property="og:title" content="Linking (Spatial) Data – Foundations of Spatial Data Science">
<meta property="og:image" content="img/Hackney.png">
<meta property="og:site_name" content="Foundations">
<meta property="og:locale" content="en_GB">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-md " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/logo/logo_only_sm.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Foundations of Spatial Data Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../setup/index.html"> 
<span class="menu-text">Setup</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-week-by-week" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Week-by-Week</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-week-by-week">    
        <li>
    <a class="dropdown-item" href="../sessions/index.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Part 1: Foundations</li>
        <li>
    <a class="dropdown-item" href="../sessions/week1.html">
 <span class="dropdown-text">1. Setting Up</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week2.html">
 <span class="dropdown-text">2. Foundations (Pt.1)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week3.html">
 <span class="dropdown-text">3. Foundations (Pt.2)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week4.html">
 <span class="dropdown-text">4. Efficient Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week5.html">
 <span class="dropdown-text">5. Objects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/reading_week.html">
 <span class="dropdown-text">Reading Week</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Part 2: Process</li>
        <li>
    <a class="dropdown-item" href="../sessions/week6.html">
 <span class="dropdown-text">6. Numeric Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week7.html">
 <span class="dropdown-text">7. Spatial Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week8.html">
 <span class="dropdown-text">8. Textual Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week9.html">
 <span class="dropdown-text">9. Selecting Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week10.html">
 <span class="dropdown-text">10. Presenting Data</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Part 3: Bonus</li>
        <li>
    <a class="dropdown-item" href="../sessions/week11.html">
 <span class="dropdown-text">11. Dimensions in Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/week12.html">
 <span class="dropdown-text">12. Grouping Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../references.html">
 <span class="dropdown-text">Bibliography</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-assessments" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Assessments</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-assessments">    
        <li>
    <a class="dropdown-item" href="../assessments/index.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Elements</li>
        <li>
    <a class="dropdown-item" href="../assessments/exam.html">
 <span class="dropdown-text">Timed Open Book Exam</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessments/group.html">
 <span class="dropdown-text">Group Work</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessments/peer.html">
 <span class="dropdown-text">Group Self-Evaluation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../help.html"> 
<span class="menu-text">Getting Help</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#data-sets-with-spatial-attributes-can-be-connected-in-more-complex-ways-than-those-without-such-attributes-consequently-the-ability-to-link-such-data-unlocks-even-more-exciting-new-applications" id="toc-data-sets-with-spatial-attributes-can-be-connected-in-more-complex-ways-than-those-without-such-attributes-consequently-the-ability-to-link-such-data-unlocks-even-more-exciting-new-applications" class="nav-link active" data-scroll-target="#data-sets-with-spatial-attributes-can-be-connected-in-more-complex-ways-than-those-without-such-attributes-consequently-the-ability-to-link-such-data-unlocks-even-more-exciting-new-applications">&gt; Data sets with spatial attributes can be connected in more complex ways than those without such attributes; consequently the ability to link such data unlocks even more exciting new applications!</a></li>
  <li><a href="#non-spatial-linkages-can-be-spatial" id="toc-non-spatial-linkages-can-be-spatial" class="nav-link" data-scroll-target="#non-spatial-linkages-can-be-spatial">Non-Spatial Linkages can be Spatial</a>
  <ul class="collapse">
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#sjoin-vs.-join" id="toc-sjoin-vs.-join" class="nav-link" data-scroll-target="#sjoin-vs.-join">Sjoin vs.&nbsp;Join</a></li>
  <li><a href="#combining-operators-how" id="toc-combining-operators-how" class="nav-link" data-scroll-target="#combining-operators-how">Combining Operators &amp; How</a></li>
  <li><a href="#merging-data" id="toc-merging-data" class="nav-link" data-scroll-target="#merging-data">Merging Data</a></li>
  <li><a href="#additional-spatial-operations" id="toc-additional-spatial-operations" class="nav-link" data-scroll-target="#additional-spatial-operations">Additional Spatial Operations</a></li>
  <li><a href="#rtm" id="toc-rtm" class="nav-link" data-scroll-target="#rtm">RTM</a></li>
  <li><a href="#set-operations-with-overlay" id="toc-set-operations-with-overlay" class="nav-link" data-scroll-target="#set-operations-with-overlay">Set Operations with Overlay</a></li>
  </ul></li>
  <li><a href="#making-a-plan" id="toc-making-a-plan" class="nav-link" data-scroll-target="#making-a-plan">Making a Plan…</a>
  <ul class="collapse">
  <li><a href="#think-it-through" id="toc-think-it-through" class="nav-link" data-scroll-target="#think-it-through">Think it Through</a></li>
  <li><a href="#whats-the-right-order" id="toc-whats-the-right-order" class="nav-link" data-scroll-target="#whats-the-right-order">What’s the ‘Right’ Order?</a></li>
  <li><a href="#mis-matched-scales" id="toc-mis-matched-scales" class="nav-link" data-scroll-target="#mis-matched-scales">Mis-matched Scales</a></li>
  </ul></li>
  <li><a href="#long-term-if-you-continue-to-work-with-large-spatial-data-sets-youll-need-to-look-into-web-services-and-spatial-databases." id="toc-long-term-if-you-continue-to-work-with-large-spatial-data-sets-youll-need-to-look-into-web-services-and-spatial-databases." class="nav-link" data-scroll-target="#long-term-if-you-continue-to-work-with-large-spatial-data-sets-youll-need-to-look-into-web-services-and-spatial-databases.">&gt; Long term: if you continue to work with large spatial data sets you’ll need to look into web services and spatial databases.</a>
  <ul class="collapse">
  <li><a href="#web-services" id="toc-web-services" class="nav-link" data-scroll-target="#web-services">Web Services</a></li>
  <li><a href="#spatial-databases" id="toc-spatial-databases" class="nav-link" data-scroll-target="#spatial-databases">Spatial Databases</a></li>
  </ul></li>
  <li><a href="#thank-you" id="toc-thank-you" class="nav-link" data-scroll-target="#thank-you">Thank You</a></li>
  </ul>
<div class="toc-actions"><ul class="collapse"><li><a href="https://github.com/jreades/fsds/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="9.2-Linking_Spatial_Data.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Linking (Spatial) Data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jon Reades </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="data-sets-with-spatial-attributes-can-be-connected-in-more-complex-ways-than-those-without-such-attributes-consequently-the-ability-to-link-such-data-unlocks-even-more-exciting-new-applications" class="level1">
<h1>&gt; Data sets with spatial attributes can be connected in more complex ways than those without such attributes; consequently the ability to link such data unlocks even more exciting new applications!</h1>
</section>
<section id="non-spatial-linkages-can-be-spatial" class="level1 page-columns page-full">
<h1>Non-Spatial Linkages can be Spatial</h1>
<section id="section" class="level2 smaller page-columns page-full">
<h2 class="smaller anchored" data-anchor-id="section"></h2>
<div class="columns">
<div class="column" style="width:50%;">
<section id="data-set-1" class="level3">
<h3 class="anchored" data-anchor-id="data-set-1">Data Set 1</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>SensorID</th>
<th>Latitude</th>
<th>Longitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>51.5070</td>
<td>-0.1347</td>
</tr>
<tr class="even">
<td>2</td>
<td>51.5071</td>
<td>-0.0042</td>
</tr>
<tr class="odd">
<td>3</td>
<td>51.5074</td>
<td>-0.1223</td>
</tr>
<tr class="even">
<td>4</td>
<td>51.5073</td>
<td>-0.1122</td>
</tr>
<tr class="odd">
<td>5</td>
<td>51.5072</td>
<td>0.1589</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="st">'SensorID'</span>: [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>],</span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="st">'Latitude'</span>: [<span class="fl">51.5070</span>, <span class="fl">51.5071</span>, <span class="fl">51.5074</span>, <span class="fl">51.5073</span>, <span class="fl">51.5073</span>],</span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="st">'Longitude'</span>: [<span class="op">-</span><span class="fl">0.1347</span>, <span class="op">-</span><span class="fl">0.0042</span>, <span class="op">-</span><span class="fl">0.1223</span>, <span class="op">-</span><span class="fl">0.1122</span>, <span class="fl">0.1589</span>]</span>
<span id="cb1-5"><a href="#cb1-5"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</div><div class="column" style="width:50%;">
<section id="data-set-2" class="level3">
<h3 class="anchored" data-anchor-id="data-set-2">Data Set 2</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>SensorID</th>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Temperature</td>
<td>5ºC</td>
</tr>
<tr class="even">
<td>1</td>
<td>Humidity</td>
<td>15%</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Temperature</td>
<td>7ºC</td>
</tr>
<tr class="even">
<td>4</td>
<td>Temperature</td>
<td>7ºC</td>
</tr>
<tr class="odd">
<td>6</td>
<td>Humidity</td>
<td>18%</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>df1 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="st">'SensorID'</span>: [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>],</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="st">'Parameter'</span>: [<span class="st">'Temperature'</span>,<span class="st">'Humidity'</span>,<span class="st">'Temperature'</span>,<span class="st">'Temperature'</span>,<span class="st">'Humidity'</span>], </span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="st">'Value'</span>: [<span class="st">'5ºC'</span>, <span class="st">'15%'</span>, <span class="st">'7ºC'</span>, <span class="st">'7ºC'</span>, <span class="st">'18%'</span>]</span>
<span id="cb2-5"><a href="#cb2-5"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>This wouldn’t be a particularly <em>good</em> design for a data structure… why?</p>
</div></div><div class="notes">
<p>Obviously, we can use non-spatial operations on spatial data sets.</p>
</div>
</section>
<section id="sjoin-vs.-join" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="sjoin-vs.-join">Sjoin vs.&nbsp;Join</h2>
<p>Sjoin adds an <em>operator</em> (<code>['intersects','contains','within']</code>) and example code can be <a href="https://github.com/jreades/i2p/blob/master/lectures/8.2-Linking_Spatial_Data.ipynb">found on GitHub</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>gdf <span class="op">=</span> gpd.GeoDataFrame(df, </span>
<span id="cb3-2"><a href="#cb3-2"></a>            geometry<span class="op">=</span>gpd.points_from_xy(df.longitude, df.latitude,</span>
<span id="cb3-3"><a href="#cb3-3"></a>            crs<span class="op">=</span><span class="st">'epsg:4326'</span>)).to_crs(<span class="st">'epsg:27700'</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a>hackney <span class="op">=</span> boros[boros.NAME<span class="op">==</span><span class="st">'Hackney'</span>]</span>
<span id="cb3-5"><a href="#cb3-5"></a>rs <span class="op">=</span> gpd.sjoin(gdf, hackney, op<span class="op">=</span><span class="st">'within'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="img/Hackney.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="img/Hackney.png" class="img-fluid"></a></p>
</section>
<section id="combining-operators-how" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="combining-operators-how">Combining Operators &amp; How</h2>
<p>Changing how to <code>left</code>, <code>right</code>, or <code>inner</code> changes the join’s behaviour:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>rs <span class="op">=</span> gpd.sjoin(gdf, hackney, how<span class="op">=</span><span class="st">'left'</span>, op<span class="op">=</span><span class="st">'within'</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a>rs.NAME.fillna(<span class="st">'None'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a>ax <span class="op">=</span> boros[boros.NAME<span class="op">==</span><span class="st">'Hackney'</span>].plot(edgecolor<span class="op">=</span><span class="st">'k'</span>, facecolor<span class="op">=</span><span class="st">'none'</span>, figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">8</span>))</span>
<span id="cb4-4"><a href="#cb4-4"></a>rs.plot(ax<span class="op">=</span>ax, column<span class="op">=</span><span class="st">'NAME'</span>, legend<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="img/Hackney-Left.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="img/Hackney-Left.png" class="img-fluid"></a></p>
</section>
<section id="merging-data" class="level2">
<h2 class="anchored" data-anchor-id="merging-data">Merging Data</h2>
<p>These <a href="https://geopandas.org/mergingdata.html#merging-data">merge operators</a> apply where <code>a</code> is the <em>left</em> set of features (in a GeoSeries or GeoDataFrame) and <code>b</code> is the <em>right</em> set:</p>
<ul>
<li><strong>Contains</strong>: Returns <code>True</code> if no points of b lie outside of a and <em>at least one point</em> of b lies inside a.</li>
<li><strong>Within</strong>: Returns <code>True</code> if a’s boundary and interior intersect only with the interior of b (not its boundary or exterior).</li>
<li><strong>Intersects</strong>: Returns <code>True</code> if the boundary or interior of a intersects in any way with those of b.</li>
</ul>
<p>All <a href="https://shapely.readthedocs.io/en/latest/manual.html#binary-predicates">binary predicates</a> are supported by features of GeoPandas, though <em>only</em> these three options are available in <code>sjoin</code> directly.</p>
<div class="notes">
<p>Behaviour of operaions may vary with how you set up <code>left</code> and <code>right</code> tables, but you can probably think your way through it by asking: “Which features of x fall <em>within</em> features of y?” or “Do features of x contain y?” You will probably get it wrong at least a few times. That’s ok.</p>
</div>
</section>
<section id="additional-spatial-operations" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="additional-spatial-operations">Additional Spatial Operations</h2>
<p>These operators apply to the <a href="https://geopandas.org/reference.html#geoseries">GeoSeries</a> where <code>a</code> is a GeoSeries and <code>b</code> is one or more spatial features:</p>
<ul>
<li><strong>Contains</strong> / <strong>Covers</strong>: Returns a <code>Series</code> of <code>dtype('bool')</code> with value <code>True</code> for each geometry in <code>a</code> that contains <code>b</code>. These are <em>different</em>.</li>
<li><strong>Crosses</strong>: An object is said to cross other if its interior intersects the interior of the other but does not contain it, and the dimension of the intersection is less than the dimension of the one or the other.</li>
<li><strong>Touches</strong>: Returns a <code>Series</code> indicating which elements of <code>a</code> touch a point on <code>b</code>.</li>
<li><strong>Distance</strong>: Returns a <code>Series</code> containing the distance from all <code>a</code> to some <code>b</code>.</li>
<li><strong>Disjoint</strong>: Returns a <code>Series</code> indicating which elements of <code>a</code> do not intersect with any <code>b</code>.</li>
<li><strong>Geom Equals</strong> / <strong>Geom Almost Equals</strong>: strict and loose tests of equality between <code>a</code> and <code>b</code> in terms of their geometry.</li>
<li><strong>Buffer</strong>, <strong>Simplify</strong>, <strong>Centroid</strong>, <strong>Representative Point</strong>: common transformations.</li>
<li><strong>Rotate</strong>, <strong>Scale</strong>, <strong>Affine Transform</strong>, <strong>Skew</strong>, <strong>Translate</strong>: less common transformations.</li>
<li><strong>Unary Union</strong>: aggregation of all the geometries in <code>a</code></li>
</ul>
</section>
<section id="rtm" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="rtm">RTM</h2>
<blockquote class="blockquote">
<p>In particular, “contains” (and its converse “within”) has an aspect of its definition which may produce unexpected behaviour. This quirk can be expressed as “<em>Polygons do not contain their boundary</em>”. More precisely, the definition of contains is: <em>Geometry A <strong>contains</strong> Geometry B iff no points of B lie in the exterior of A, and at least one point of the interior of B lies in the interior of A</em> That last clause causes the trap – because of it, a LineString which is completely contained in the boundary of a Polygon is <strong>not</strong> considered to be contained in that Polygon! This behaviour could easily trip up someone who is simply trying to find all LineStrings which have no points outside a given Polygon. In fact, this is probably the most common usage of contains. For this reason it’s useful to define another predicate called covers, which has the intuitively expected semantics: <em>Geometry A <strong>covers</strong> Geometry B iff no points of B lie in the exterior of A</em></p>
</blockquote>
</section>
<section id="set-operations-with-overlay" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="set-operations-with-overlay">Set Operations with Overlay</h2>
<p>It is also possible to apply GIS-type ‘overlay’ operations:</p>
<p><a href="https://geopandas.org/_images/overlay_operations.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="https://geopandas.org/_images/overlay_operations.png" class="img-fluid"></a></p>
<p><a href="https://geopandas.org/set_operations.html#set-operations-with-overlay">These operations</a> return indexes for <code>gdf1</code> and <code>gdf2</code> (either could be a <code>NaN</code>) together with a geometry and (usually?) columns from both data frames:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>rs_union <span class="op">=</span> geopandas.overlay(gdf1, gdf2, how<span class="op">=</span><span class="st">'union'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The set of operations includes: <code>union</code>, <code>intersection</code>, <code>difference</code>, <code>symmetric_difference</code>, and <code>identity</code>.</p>
<div class="notes">
<p>A notebook example <a href="https://nbviewer.jupyter.org/github/geopandas/geopandas/blob/master/examples/overlays.ipynb">can be found here</a>.</p>
</div>
</section>
</section>
<section id="making-a-plan" class="level1">
<h1>Making a Plan…</h1>
<section id="think-it-through" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="think-it-through">Think it Through</h2>
<p>As your data grows in volume, the consequences of choosing the ‘wrong’ approach become more severe. Making a plan of attack becomes essential and it boils down to the following:</p>
<ol type="1">
<li>Spatial joins are <em>hard</em></li>
<li>Non-spatial joins are <em>easy</em></li>
<li>Key-/Index-based joins are <em>easiest</em></li>
<li>Addition conditions to joins makes them harder.</li>
</ol>
<p>So, when you have multiple joins…</p>
<ol type="1">
<li>Do the <em>easy</em> ones first (they will run quickly on large data sets).</li>
<li>Do the <em>hard</em> ones last (they will benefit most from the filtering process).</li>
</ol>
</section>
<section id="whats-the-right-order" class="level2">
<h2 class="anchored" data-anchor-id="whats-the-right-order">What’s the ‘Right’ Order?</h2>
<p>Q. Find me a nearby family-style Italian restaurant…</p>
<p>A. Here’s how I’d do this:</p>
<ul>
<li>City = New York (probably a key)
<ul>
<li>Cuisine = Italian (probably a key)
<ul>
<li>Style = Family (probably an enumeration/free text)
<ul>
<li>Location = Within Distance of X from Request (probably a buffered spatial query)</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="mis-matched-scales" class="level2">
<h2 class="anchored" data-anchor-id="mis-matched-scales">Mis-matched Scales</h2>
<p>Keep in mind:</p>
<blockquote class="blockquote">
<p>With complex geometries and mis-matched scales, converting the smaller geometry to centroids or representative points can speed things up a lot (within, contains, etc. become much simpler).</p>
</blockquote>
<p>And that:</p>
<blockquote class="blockquote">
<p>With large data sets, rasterising the smaller and more ‘abundant’ geometry can speed things up a lot.</p>
</blockquote>
</section>
</section>
<section id="long-term-if-you-continue-to-work-with-large-spatial-data-sets-youll-need-to-look-into-web-services-and-spatial-databases." class="level1 page-columns page-full">
<h1>&gt; Long term: if you continue to work with large spatial data sets you’ll need to look into web services and spatial databases.</h1>
<section id="web-services" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="web-services">Web Services</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 8%">
<col style="width: 22%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Acronym</th>
<th>Means</th>
<th>Does</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WMS</td>
<td>Web Map Service</td>
<td>Transfers map <em>images</em> within an area specified by bounding box; vector formats possible, but rarely used.</td>
</tr>
<tr class="even">
<td>WFS</td>
<td>Web Feature Service</td>
<td>Allows interaction with features; so not about rendering maps directly, more about manipulation.</td>
</tr>
<tr class="odd">
<td>WCS</td>
<td>Web Coverage Service</td>
<td>Transfers data about objects covering a geographical area.</td>
</tr>
<tr class="even">
<td>OWS</td>
<td>Open Web Services</td>
<td>Seems to be used by QGIS to serve data <em>from</em> a PC or server.</td>
</tr>
</tbody>
</table>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>See also <a href="https://carto.com/">Carto</a> and competitors.</p>
</div></div></section>
<section id="spatial-databases" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="spatial-databases">Spatial Databases</h2>
<p>There are many flavours:</p>
<ul>
<li><a href="https://blogs.oracle.com/oraclespatial/spatial-now-free-with-all-editions-of-oracle-database">Oracle</a>: good enterprise support; reasonably feature-rich, but £££ for commercial use.</li>
<li><a href="https://www.mysql.com/">MySQL</a>: free, unless you want dedicated support; <em>was</em> feature-poor (<a href="https://dev.mysql.com/doc/refman/8.0/en/spatial-function-reference.html">though this looks to have changed with MySQL8</a>); heavyweight.</li>
<li><a href="https://www.postgresql.org/">PostgreSQL</a>: free, unless you want dedicated support; standards-setting/compliant; heavyweight (requires <a href="https://postgis.net/">PostGIS</a>).</li>
<li>Microsoft Access: um, no.</li>
<li>SpatiaLite: free; standards-setting/compliant; lightweight</li>
<li>GeoParquet+DuckDB: not as full-featured as Postgres, but evolving quickly and much simpler to configure.</li>
</ul>
<p>Generally:</p>
<ul>
<li>Ad-hoc, modestly-sized, highly portable == SpatiaLite</li>
<li>Permanent, large, weakly portable == Postgres+PostGIS</li>
</ul>
</section>
</section>
<section id="thank-you" class="level1" data-background-image="../img/web/title-slide.png" data-background-color="#0F0C11" data-background-opacity="0.2">
<h1 data-background-image="/img/web/title-slide.png" data-background-color="#0F0C11" data-background-opacity="0.2">Thank You</h1>
<h3 class="anchored" data-anchor-id="thank-you">
References
</h3>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 2022–2025, Jon Reades</p>
</div>   
    <div class="nav-footer-center">
<p><img src="../img/logo/logo_only_sm.png" height="25"> Foundations of Spatial Data Science</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jreades/fsds/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jreades/fsds">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://bsky.app/profile/jreades.bsky.social/">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>